import{f as x,a as _,c as Se}from"../chunks/CUf5UZYF.js";import"../chunks/BoQy5TvO.js";import{o as Ze}from"../chunks/JjBbrouE.js";import{a6 as ea,a7 as aa,a8 as ta,a9 as re,aa as k,a4 as s,i as e,ab as ra,z as P,ac as o,k as f,ad as ue,a5 as r,u as v,af as sa,a2 as oa,ae as N,M as va}from"../chunks/C6kp5iGx.js";import{s as p,e as Ie}from"../chunks/Dvw9CKj1.js";import{i as L}from"../chunks/BMTi0gWB.js";import{b as la,e as se,i as me}from"../chunks/DPurX8ys.js";import{r as oe,s as ia}from"../chunks/CK8WfoRq.js";import{s as da}from"../chunks/D6eV9jrv.js";import{s as De}from"../chunks/BfAcoFpJ.js";import{b as K}from"../chunks/BXzdIX3i.js";import{b as _e}from"../chunks/oa8gdtCF.js";import{i as na}from"../chunks/BvILkHPm.js";import{g as ca}from"../chunks/BqC4448f.js";import{N as pa,c as Fe}from"../chunks/CAlpgxxh.js";import{M as ua}from"../chunks/DIG4Q-3q.js";import{l as Ne,p as ma}from"../chunks/tGRDOfAf.js";var _a=x("<option> </option>"),ka=x("<option> </option>"),xa=x("<option> </option>"),ya=x('<div class="original-price svelte-1kxy863"> </div>'),fa=x('<div class="current-price svelte-1kxy863"> </div> <!>',1),ba=x('<div class="current-price svelte-1kxy863"> </div> <div class="min-order-info svelte-1kxy863"> </div>',1),ha=x('<div class="quota-info svelte-1kxy863"><div class="quota-bar svelte-1kxy863"><div class="quota-fill svelte-1kxy863"></div></div> <span class="quota-text svelte-1kxy863"> </span></div>'),ga=x('<button class="btn-custom-order svelte-1kxy863">‚úèÔ∏è</button>'),Ca=x('<a class="listing-card svelte-1kxy863"><div class="card-image svelte-1kxy863"><div class="image-placeholder svelte-1kxy863"> </div> <div class="type-badge svelte-1kxy863"> </div></div> <div class="card-content svelte-1kxy863"><div class="price-section svelte-1kxy863"><!></div> <h3 class="listing-title svelte-1kxy863"> </h3> <div class="meta-row svelte-1kxy863"><div class="rating-badge svelte-1kxy863"><span class="star-icon svelte-1kxy863">‚≠ê</span> <span class="rating-value svelte-1kxy863"> </span></div> <span class="divider svelte-1kxy863">‚Ä¢</span> <span class="sold-count svelte-1kxy863"> </span></div> <div class="jastiper-compact svelte-1kxy863"><span class="jastiper-avatar-small svelte-1kxy863"> </span> <span class="jastiper-name-small svelte-1kxy863"> </span></div> <!> <div class="card-actions svelte-1kxy863"><button> </button> <!></div></div></a>'),ja=x('<div class="empty-state svelte-1kxy863"><div class="empty-icon svelte-1kxy863">üîç</div> <h3 class="svelte-1kxy863">Tidak ada postingan yang ditemukan</h3> <p class="svelte-1kxy863">Coba ubah filter atau kata kunci pencarian Anda</p></div>'),Pa=x('<div class="available-stores svelte-1kxy863"><strong class="svelte-1kxy863">Toko tersedia:</strong> </div>'),$a=x("<option> </option>"),Na=x(`<div class="custom-order-modal svelte-1kxy863"><div class="jastiper-info-modal svelte-1kxy863"><span class="avatar-large svelte-1kxy863"> </span> <div><div class="jastiper-name-large svelte-1kxy863"> </div> <div class="jastiper-meta svelte-1kxy863"> </div> <!></div></div> <p class="modal-description svelte-1kxy863">Pesan produk yang tidak ada di postingan ini, tapi tersedia di toko yang sama dengan
        jastiper</p> <div class="custom-order-form svelte-1kxy863"><div class="form-group svelte-1kxy863"><label for="productName" class="svelte-1kxy863">Nama Produk <span class="required svelte-1kxy863">*</span></label> <input id="productName" type="text" placeholder="Contoh: iPhone 15 Pro Max 256GB" class="svelte-1kxy863"/></div> <div class="form-group svelte-1kxy863"><label for="productLink" class="svelte-1kxy863">Link Produk (Opsional)</label> <input id="productLink" type="url" placeholder="https://..." class="svelte-1kxy863"/></div> <div class="form-group svelte-1kxy863"><label for="store" class="svelte-1kxy863">Nama Toko</label> <select id="store" class="svelte-1kxy863"><!><option>Lainnya</option></select></div> <div class="form-row svelte-1kxy863"><div class="form-group svelte-1kxy863"><label for="quantity" class="svelte-1kxy863">Jumlah</label> <input id="quantity" type="number" min="1" max="99" class="svelte-1kxy863"/></div> <div class="form-group svelte-1kxy863"><label for="estimatedPrice" class="svelte-1kxy863">Estimasi Harga (per item) <span class="required svelte-1kxy863">*</span></label> <input id="estimatedPrice" type="number" placeholder="Dalam Rupiah" min="0" class="svelte-1kxy863"/></div></div> <div class="form-group svelte-1kxy863"><label for="notes" class="svelte-1kxy863">Catatan Tambahan</label> <textarea id="notes" placeholder="Warna, ukuran, varian, atau detail lainnya" rows="3" class="svelte-1kxy863"></textarea></div> <div class="info-box-modal svelte-1kxy863"><strong class="svelte-1kxy863">üí° Tips:</strong> <ul class="svelte-1kxy863"><li class="svelte-1kxy863">Pastikan produk tersedia di toko yang dipilih</li> <li class="svelte-1kxy863">Harga final bisa berbeda dengan estimasi</li> <li class="svelte-1kxy863">Jastiper akan konfirmasi harga sebelum pembelian</li></ul></div></div></div>`),La=x('<!> <div class="container svelte-1kxy863"><div class="header svelte-1kxy863"><h1 class="svelte-1kxy863">Browse Jastip & Preloved</h1> <p class="svelte-1kxy863">Temukan barang impian dari berbagai negara</p></div> <div class="filters svelte-1kxy863"><input type="text" placeholder="Cari produk, toko, atau jastiper..." class="search-input svelte-1kxy863"/> <div class="filter-row svelte-1kxy863"><select class="filter-select svelte-1kxy863"></select> <select class="filter-select svelte-1kxy863"><option>Semua Negara</option><!></select> <select class="filter-select svelte-1kxy863"></select></div></div> <div class="results-info svelte-1kxy863"> </div> <div class="listings-grid svelte-1kxy863"></div> <!></div> <!>',1);function Wa(Ae,Re){ea(Re,!1);const q=P();let Le="guest";la.subscribe(t=>{Le=t.role}),Ze(()=>{Le==="guest"&&ca("/login?redirect=/browse&expected=user")});let M=P(""),S=P("all"),I=P("all"),D=P("Semua Kategori");const Te=[{value:"all",label:"Semua Tipe"},{value:"jastip",label:"Jastip"},{value:"preloved",label:"Preloved"},{value:"event",label:"Event"}],Be=["Semua Kategori","Kosmetik","Fashion","Elektronik","Gadget","Gaming","Skincare","Tas","Branded","Sepatu"];function ke(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)}function Ke(t){const a=Te.find(d=>d.value===t);return(a==null?void 0:a.label)??t}function Je(t){return t==="jastip"?"#0ea5e9":t==="preloved"?"#f97316":t==="event"?"#a855f7":"#64748b"}let g=P({}),ve=P(!1),c=P(null),i=P({productName:"",productLink:"",store:"",quantity:1,estimatedPrice:"",notes:""});function Ee(t,a){a.preventDefault(),a.stopPropagation(),Fe.addItem(t,1),N(g,e(g)[t.id]=!0),setTimeout(()=>{N(g,e(g)[t.id]=!1),f(g,{...e(g)})},2e3)}function Ge(t,a){var d;a.preventDefault(),a.stopPropagation(),f(c,t),f(i,{productName:"",productLink:"",store:((d=t.stores)==null?void 0:d[0])||"",quantity:1,estimatedPrice:"",notes:""}),f(ve,!0)}function we(){f(ve,!1),f(c,null)}function He(){if(!e(i).productName||!e(i).estimatedPrice){alert("Mohon lengkapi nama produk dan estimasi harga");return}const t={id:"CUSTOM-"+Date.now(),type:"jastip",jastiperId:e(c).jastiperId,jastiperName:e(c).jastiperName,jastiperAvatar:e(c).jastiperAvatar,jastiperRating:e(c).jastiperRating,title:`Custom Order: ${e(i).productName}`,description:e(i).notes||"Pesanan custom",country:e(c).country,countryCode:e(c).countryCode,stores:[e(i).store],categories:e(c).categories,fee:e(c).fee,minOrder:parseInt(e(i).estimatedPrice),images:["üì¶"],isCustomOrder:!0,customDetails:{productName:e(i).productName,productLink:e(i).productLink,store:e(i).store,notes:e(i).notes}};Fe.addItem(t,parseInt(e(i).quantity)),alert(`Custom order "${e(i).productName}" berhasil ditambahkan ke keranjang!`),we()}aa(()=>(e(M),e(S),e(I),e(D)),()=>{f(q,Ne.filter(t=>{const a=e(M)===""||t.title.toLowerCase().includes(e(M).toLowerCase())||t.description.toLowerCase().includes(e(M).toLowerCase()),d=e(S)==="all"||t.type===e(S),y=e(I)==="all"||t.countryCode===e(I),m=e(D)==="Semua Kategori"||t.categories.includes(e(D));return a&&d&&y&&m}))}),ta(),na();var Oe=La(),qe=re(Oe);pa(qe,{});var xe=o(qe,2),ye=o(s(xe),2),fe=s(ye);oe(fe);var Me=o(fe,2),le=s(Me);k(()=>{e(S),ue(()=>{})}),se(le,5,()=>Te,me,(t,a)=>{var d=_a(),y=s(d,!0);r(d);var m={};k(()=>{p(y,(e(a),v(()=>e(a).label))),m!==(m=(e(a),v(()=>e(a).value)))&&(d.value=(d.__value=(e(a),v(()=>e(a).value)))??"")}),_(t,d)}),r(le);var ie=o(le,2);k(()=>{e(I),ue(()=>{})});var be=s(ie);be.value=be.__value="all";var We=o(be);se(We,1,()=>ma,me,(t,a)=>{var d=ka(),y=s(d);r(d);var m={};k(()=>{p(y,`${e(a),v(()=>e(a).flag)??""} ${e(a),v(()=>e(a).name)??""}`),m!==(m=(e(a),v(()=>e(a).code)))&&(d.value=(d.__value=(e(a),v(()=>e(a).code)))??"")}),_(t,d)}),r(ie);var he=o(ie,2);k(()=>{e(D),ue(()=>{})}),se(he,5,()=>Be,me,(t,a)=>{var d=xa(),y=s(d,!0);r(d);var m={};k(()=>{p(y,e(a)),m!==(m=e(a))&&(d.value=(d.__value=e(a))??"")}),_(t,d)}),r(he),r(Me),r(ye);var ge=o(ye,2),ze=s(ge);r(ge);var Ce=o(ge,2);se(Ce,5,()=>e(q),t=>t.id,(t,a)=>{var d=Ca(),y=s(d),m=s(y),J=s(m,!0);r(m);var T=o(m,2),E=s(T,!0);r(T),r(y);var F=o(y,2),G=s(F),de=s(G);{var H=l=>{var n=fa(),u=re(n),C=s(u,!0);r(u);var b=o(u,2);{var h=j=>{var B=ya(),Xe=s(B,!0);r(B),k(Ye=>p(Xe,Ye),[()=>(e(a),v(()=>ke(e(a).originalPrice)))]),_(j,B)};L(b,j=>{e(a),v(()=>e(a).originalPrice)&&j(h)})}k(j=>p(C,j),[()=>(e(a),v(()=>ke(e(a).price)))]),_(l,n)},je=l=>{var n=ba(),u=re(n),C=s(u);r(u);var b=o(u,2),h=s(b);r(b),k(j=>{p(C,`Fee ${e(a),v(()=>e(a).fee)??""}%`),p(h,`Min. Order ${j??""}`)},[()=>(e(a),v(()=>ke(e(a).minOrder||0)))]),_(l,n)};L(de,l=>{e(a),v(()=>e(a).type==="preloved")?l(H):l(je,!1)})}r(G);var w=o(G,2),Pe=s(w,!0);r(w);var W=o(w,2),z=s(W),Q=o(s(z),2),U=s(Q,!0);r(Q),r(z);var V=o(z,4),X=s(V);r(V),r(W);var A=o(W,2),O=s(A),Y=s(O,!0);r(O);var Z=o(O,2),$e=s(Z,!0);r(Z),r(A);var ee=o(A,2);{var ae=l=>{var n=ha(),u=s(n),C=s(u);r(u);var b=o(u,2),h=s(b);r(b),r(n),k(()=>{De(C,`width: ${e(a),v(()=>e(a).sold/e(a).quota*100)??""}%`),p(h,`${e(a),v(()=>e(a).sold)??""}/${e(a),v(()=>e(a).quota)??""} slot`)}),_(l,n)};L(ee,l=>{e(a),v(()=>e(a).type!=="preloved")&&l(ae)})}var R=o(ee,2),$=s(R);let te;var ne=s($,!0);r($);var ce=o($,2);{var pe=l=>{var n=ga();Ie("click",n,u=>Ge(e(a),u)),_(l,n)};L(ce,l=>{e(a),v(()=>{var n;return e(a).type==="jastip"&&((n=e(a).stores)==null?void 0:n.length)>0})&&l(pe)})}r(R),r(F),r(d),k((l,n)=>{ia(d,"href",`/browse/${e(a),v(()=>e(a).id)??""}`),p(J,(e(a),v(()=>e(a).images[0]))),De(T,`background-color: ${l??""}`),p(E,n),p(Pe,(e(a),v(()=>e(a).title))),p(U,(e(a),v(()=>e(a).jastiperRating))),p(X,`Sold ${e(a),v(()=>e(a).sold||0)??""}`),p(Y,(e(a),v(()=>e(a).jastiperAvatar))),p($e,(e(a),v(()=>e(a).jastiperName))),te=da($,1,"btn-add-to-cart svelte-1kxy863",null,te,{added:e(g)[e(a).id]}),p(ne,(e(g),e(a),v(()=>e(g)[e(a).id]?"‚úì":"üõí")))},[()=>(e(a),v(()=>Je(e(a).type))),()=>(e(a),v(()=>Ke(e(a).type)))]),Ie("click",$,l=>Ee(e(a),l)),_(t,d)}),r(Ce);var Qe=o(Ce,2);{var Ue=t=>{var a=ja();_(t,a)};L(Qe,t=>{e(q),v(()=>e(q).length===0)&&t(Ue)})}r(xe);var Ve=o(xe,2);ua(Ve,{title:"Custom Order",showCancel:!0,cancelText:"Batal",confirmText:"Tambah ke Keranjang",autoCloseOnConfirm:!1,maxWidth:"680px",get isOpen(){return e(ve)},set isOpen(t){f(ve,t)},$$events:{cancel:we,confirm:He},children:(t,a)=>{var d=Se(),y=re(d);{var m=J=>{var T=Na(),E=s(T),F=s(E),G=s(F,!0);r(F);var de=o(F,2),H=s(de),je=s(H,!0);r(H);var w=o(H,2),Pe=s(w);r(w);var W=o(w,2);{var z=l=>{var n=Pa(),u=o(s(n));r(n),k(C=>p(u,` ${C??""}`),[()=>(e(c),v(()=>e(c).stores.join(", ")))]),_(l,n)};L(W,l=>{e(c),v(()=>{var n;return((n=e(c).stores)==null?void 0:n.length)>0})&&l(z)})}r(de),r(E);var Q=o(E,4),U=s(Q),V=o(s(U),2);oe(V),r(U);var X=o(U,2),A=o(s(X),2);oe(A),r(X);var O=o(X,2),Y=o(s(O),2);k(()=>{e(i),ue(()=>{e(c)})});var Z=s(Y);{var $e=l=>{var n=Se(),u=re(n);se(u,1,()=>(e(c),v(()=>e(c).stores)),me,(C,b)=>{var h=$a(),j=s(h,!0);r(h);var B={};k(()=>{p(j,e(b)),B!==(B=e(b))&&(h.value=(h.__value=e(b))??"")}),_(C,h)}),_(l,n)};L(Z,l=>{e(c),v(()=>{var n;return((n=e(c).stores)==null?void 0:n.length)>0})&&l($e)})}var ee=o(Z);ee.value=ee.__value="Lainnya",r(Y),r(O);var ae=o(O,2),R=s(ae),$=o(s(R),2);oe($),r(R);var te=o(R,2),ne=o(s(te),2);oe(ne),r(te),r(ae);var ce=o(ae,2),pe=o(s(ce),2);sa(pe),r(ce),oa(2),r(Q),r(T),k(()=>{p(G,(e(c),v(()=>e(c).jastiperAvatar))),p(je,(e(c),v(()=>e(c).jastiperName))),p(Pe,`${e(c),v(()=>e(c).country)??""} ‚Ä¢ Fee ${e(c),v(()=>e(c).fee)??""}%`)}),K(V,()=>e(i).productName,l=>N(i,e(i).productName=l)),K(A,()=>e(i).productLink,l=>N(i,e(i).productLink=l)),_e(Y,()=>e(i).store,l=>N(i,e(i).store=l)),K($,()=>e(i).quantity,l=>N(i,e(i).quantity=l)),K(ne,()=>e(i).estimatedPrice,l=>N(i,e(i).estimatedPrice=l)),K(pe,()=>e(i).notes,l=>N(i,e(i).notes=l)),_(J,T)};L(y,J=>{e(c)&&J(m)})}_(t,d)},$$slots:{default:!0},$$legacy:!0}),k(()=>p(ze,`Menampilkan ${e(q),v(()=>e(q).length)??""} dari ${va(Ne),v(()=>Ne.length)??""} postingan`)),K(fe,()=>e(M),t=>f(M,t)),_e(le,()=>e(S),t=>f(S,t)),_e(ie,()=>e(I),t=>f(I,t)),_e(he,()=>e(D),t=>f(D,t)),_(Ae,Oe),ra()}export{Wa as component};
