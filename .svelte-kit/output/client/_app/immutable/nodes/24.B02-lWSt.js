import{f as $,a as w}from"../chunks/CUf5UZYF.js";import"../chunks/BoQy5TvO.js";import{o as pa}from"../chunks/JjBbrouE.js";import{a6 as ba,a7 as Je,a8 as ua,a9 as Le,aa as N,ab as ma,i as e,z as O,ac as a,u as c,a4 as t,k as ve,a5 as s,a2 as ce,af as Ue,ae as g,ar as ze}from"../chunks/C6kp5iGx.js";import{s as j,e as R}from"../chunks/Dvw9CKj1.js";import{i as U}from"../chunks/BMTi0gWB.js";import{b as _a,e as He,i as fa}from"../chunks/DPurX8ys.js";import{r as S}from"../chunks/CK8WfoRq.js";import{s as z}from"../chunks/D6eV9jrv.js";import{a as ha,b as q,c as de}from"../chunks/BXzdIX3i.js";import{i as ya}from"../chunks/BvILkHPm.js";import{s as ka,a as ga}from"../chunks/B2umgvaE.js";import{g as Y}from"../chunks/BqC4448f.js";import{N as xa,c as Ee}from"../chunks/CAlpgxxh.js";function Pa({url:H}){return{redirect:H.searchParams.get("redirect")||null,expected:H.searchParams.get("expected")||"user"}}const Wa=Object.freeze(Object.defineProperty({__proto__:null,load:Pa},Symbol.toStringTag,{value:"Module"}));var Ta=$('<div class="step-content svelte-jbcej5"><h2 class="svelte-jbcej5">Syarat & Ketentuan</h2> <div class="terms-box svelte-jbcej5"><h3 class="svelte-jbcej5">Ketentuan Umum</h3> <ul class="svelte-jbcej5"><li class="svelte-jbcej5">Harga final dapat berubah sesuai harga aktual produk saat pembelian</li> <li class="svelte-jbcej5">Anda akan dikonfirmasi terlebih dahulu sebelum pembayaran final</li> <li class="svelte-jbcej5">Pembayaran DP 50% akan dikembalikan jika harga final jauh berbeda</li> <li class="svelte-jbcej5">Estimasi waktu pengiriman bergantung pada jadwal keberangkatan jastiper</li></ul> <h3 class="svelte-jbcej5">Kebijakan Pembatalan</h3> <ul class="svelte-jbcej5"><li class="svelte-jbcej5">Pembatalan dapat dilakukan sebelum jastiper membeli produk</li> <li class="svelte-jbcej5">Refund akan diproses dalam 3-7 hari kerja</li> <li class="svelte-jbcej5">Biaya admin 5% akan dikenakan untuk pembatalan</li></ul> <h3 class="svelte-jbcej5">Ketentuan Preloved</h3> <ul class="svelte-jbcej5"><li class="svelte-jbcej5">Barang preloved dijual dalam kondisi apa adanya</li> <li class="svelte-jbcej5">Foto dan deskripsi merepresentasikan kondisi aktual</li> <li class="svelte-jbcej5">Tidak ada refund untuk barang preloved kecuali tidak sesuai deskripsi</li></ul></div> <label class="checkbox-label svelte-jbcej5"><input type="checkbox" class="svelte-jbcej5"/> <span class="svelte-jbcej5">Saya telah membaca dan menyetujui syarat & ketentuan di atas</span></label> <div class="button-group svelte-jbcej5"><button class="btn-secondary svelte-jbcej5">← Kembali ke Keranjang</button> <button class="btn-primary svelte-jbcej5">Lanjut ke Pengiriman →</button></div></div>'),Sa=$('<div class="step-content svelte-jbcej5"><h2 class="svelte-jbcej5">Data Pengiriman</h2> <div class="form-grid svelte-jbcej5"><div class="form-group full-width svelte-jbcej5"><label for="fullName" class="svelte-jbcej5">Nama Lengkap <span class="required svelte-jbcej5">*</span></label> <input id="fullName" type="text" placeholder="Masukkan nama lengkap" class="svelte-jbcej5"/></div> <div class="form-group full-width svelte-jbcej5"><label for="phone" class="svelte-jbcej5">Nomor Telepon <span class="required svelte-jbcej5">*</span></label> <input id="phone" type="tel" placeholder="08xxxxxxxxxx" class="svelte-jbcej5"/></div> <div class="form-group full-width svelte-jbcej5"><label for="address" class="svelte-jbcej5">Alamat Lengkap <span class="required svelte-jbcej5">*</span></label> <textarea id="address" placeholder="Jalan, nomor rumah, RT/RW" rows="3" class="svelte-jbcej5"></textarea></div> <div class="form-group svelte-jbcej5"><label for="city" class="svelte-jbcej5">Kota <span class="required svelte-jbcej5">*</span></label> <input id="city" type="text" placeholder="Kota" class="svelte-jbcej5"/></div> <div class="form-group svelte-jbcej5"><label for="province" class="svelte-jbcej5">Provinsi <span class="required svelte-jbcej5">*</span></label> <input id="province" type="text" placeholder="Provinsi" class="svelte-jbcej5"/></div> <div class="form-group svelte-jbcej5"><label for="postalCode" class="svelte-jbcej5">Kode Pos <span class="required svelte-jbcej5">*</span></label> <input id="postalCode" type="text" placeholder="12345" class="svelte-jbcej5"/></div> <div class="form-group full-width svelte-jbcej5"><label for="notes" class="svelte-jbcej5">Catatan (Opsional)</label> <textarea id="notes" placeholder="Catatan tambahan untuk pengiriman" rows="2" class="svelte-jbcej5"></textarea></div></div> <div class="button-group svelte-jbcej5"><button class="btn-secondary svelte-jbcej5">← Kembali</button> <button class="btn-primary svelte-jbcej5">Lanjut ke Pembayaran →</button></div></div>'),wa=$('<label class="bank-option svelte-jbcej5"><input type="radio" class="svelte-jbcej5"/> <div class="bank-content svelte-jbcej5"><div class="bank-name svelte-jbcej5"> </div> <div class="bank-number svelte-jbcej5"> </div> <div class="bank-holder svelte-jbcej5"> </div></div></label>'),$a=$('<div class="step-content svelte-jbcej5"><h2 class="svelte-jbcej5">Pembayaran</h2> <div class="payment-section svelte-jbcej5"><h3 class="svelte-jbcej5">Pilih Metode Pembayaran</h3> <div class="payment-options svelte-jbcej5"><label class="payment-option svelte-jbcej5"><input type="radio" class="svelte-jbcej5"/> <div class="option-content svelte-jbcej5"><div class="option-header svelte-jbcej5"><span class="option-title svelte-jbcej5">Bayar Penuh</span> <span class="option-price svelte-jbcej5"> </span></div> <p class="option-desc svelte-jbcej5">Bayar seluruh nilai pesanan sekarang</p></div></label> <label class="payment-option svelte-jbcej5"><input type="radio" class="svelte-jbcej5"/> <div class="option-content svelte-jbcej5"><div class="option-header svelte-jbcej5"><span class="option-title svelte-jbcej5">DP 50%</span> <span class="option-price svelte-jbcej5"> </span></div> <p class="option-desc svelte-jbcej5">Bayar 50% sekarang, sisanya setelah konfirmasi harga final</p></div></label></div></div> <div class="payment-section svelte-jbcej5"><h3 class="svelte-jbcej5">Pilih Bank Transfer</h3> <div class="bank-options svelte-jbcej5"></div></div> <div class="info-box svelte-jbcej5"><strong class="svelte-jbcej5">Catatan Pembayaran:</strong> <ul class="svelte-jbcej5"><li class="svelte-jbcej5">Transfer sesuai nominal yang tertera untuk verifikasi otomatis</li> <li class="svelte-jbcej5">Upload bukti transfer di halaman Pesanan Saya</li> <li class="svelte-jbcej5">Pembayaran akan diverifikasi dalam 1x24 jam</li> <li class="svelte-jbcej5">Untuk DP 50%, sisa pembayaran akan ditagihkan setelah konfirmasi harga final</li></ul></div> <div class="button-group svelte-jbcej5"><button class="btn-secondary svelte-jbcej5">← Kembali</button> <button class="btn-primary svelte-jbcej5">Buat Pesanan</button></div></div>'),Ca=$('<div class="summary-item svelte-jbcej5"><div class="item-image-small svelte-jbcej5"> </div> <div class="item-info svelte-jbcej5"><div class="item-title svelte-jbcej5"> </div> <div class="item-meta svelte-jbcej5"><span> </span> <span> </span></div> <div class="item-price svelte-jbcej5"> </div></div></div>'),Da=$('<div class="summary-note svelte-jbcej5"> </div>'),Ka=$('<hr class="svelte-jbcej5"/> <div class="summary-row highlight svelte-jbcej5"><span class="svelte-jbcej5">Yang Harus Dibayar</span> <span class="value svelte-jbcej5"> </span></div> <!>',1),Na=$('<!> <div class="container svelte-jbcej5"><div class="header svelte-jbcej5"><h1 class="svelte-jbcej5">Checkout</h1> <p class="svelte-jbcej5">Selesaikan pesanan Anda</p></div> <div class="checkout-grid svelte-jbcej5"><div class="checkout-content svelte-jbcej5"><div class="progress-steps svelte-jbcej5"><div><div class="step-number svelte-jbcej5">1</div> <span class="svelte-jbcej5">Syarat & Ketentuan</span></div> <div></div> <div><div class="step-number svelte-jbcej5">2</div> <span class="svelte-jbcej5">Data Pengiriman</span></div> <div></div> <div><div class="step-number svelte-jbcej5">3</div> <span class="svelte-jbcej5">Pembayaran</span></div></div> <!> <!> <!></div> <div class="order-summary svelte-jbcej5"><h3 class="svelte-jbcej5">Ringkasan Pesanan</h3> <div class="summary-items svelte-jbcej5"></div> <hr class="svelte-jbcej5"/> <div class="summary-row svelte-jbcej5"><span class="svelte-jbcej5"> </span> <span class="value svelte-jbcej5"> </span></div> <div class="summary-row svelte-jbcej5"><span class="svelte-jbcej5">Total Fee Jastip</span> <span class="value svelte-jbcej5"> </span></div> <hr class="svelte-jbcej5"/> <div class="summary-row total svelte-jbcej5"><span class="svelte-jbcej5">Total</span> <span class="value svelte-jbcej5"> </span></div> <!></div></div></div>',1);function Ya(H,We){ba(We,!1);const G=()=>ga(Ee,"$cartStore",Ye),[Ye,Ge]=ka(),Q=O(),B=O(),oe=[],Qe=[];let je="guest";_a.subscribe(i=>{je=i.role}),pa(()=>{if(je!=="user"){Y("/login?redirect=/checkout&expected=user");return}G().items.length===0&&Y("/cart")});let p=O(1),E=O(!1),n=O({fullName:"",phone:"",address:"",city:"",province:"",postalCode:"",notes:""}),m=O({paymentType:"full",bank:"bca"});const V=[{code:"bca",name:"BCA",number:"1234567890",holder:"PT Jastipku Indonesia"},{code:"mandiri",name:"Mandiri",number:"9876543210",holder:"PT Jastipku Indonesia"},{code:"bni",name:"BNI",number:"5555666677",holder:"PT Jastipku Indonesia"}];function x(i){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i)}function pe(i){const l=i.listing;if(l.type==="preloved")return l.price*i.quantity;{const r=l.minOrder||0,v=r*(l.fee||0)/100;return(r+v)*i.quantity}}function be(){return e(B).reduce((i,l)=>i+pe(l),0)}function ue(){return e(B).reduce((i,l)=>{const r=l.listing;if(r.type!=="preloved"){const b=(r.minOrder||0)*(r.fee||0)/100;return i+b*l.quantity}return i},0)}function M(){return be()}function me(){const i=M();return e(m).paymentType==="dp"?i*.5:i}function _e(){if(e(p)===1){if(!e(E)){alert("Anda harus menyetujui syarat dan ketentuan terlebih dahulu");return}}else if(e(p)===2&&(!e(n).fullName||!e(n).phone||!e(n).address||!e(n).city||!e(n).province||!e(n).postalCode)){alert("Mohon lengkapi semua data pengiriman");return}ze(p)}function fe(){ze(p,-1)}function Ve(){var l,r;const i="ORD"+Date.now();alert(`Pesanan Anda telah dibuat!

Kode Pesanan: ${i}

Silakan lakukan pembayaran sebesar ${x(me())} ke rekening:
${(l=V.find(v=>v.code===e(m).bank))==null?void 0:l.name} - ${(r=V.find(v=>v.code===e(m).bank))==null?void 0:r.number}

Setelah transfer, upload bukti pembayaran di halaman Pesanan Saya.`),Ee.clearCart(),Y("/orders")}Je(()=>G(),()=>{ve(Q,G())}),Je(()=>e(Q),()=>{ve(B,e(Q).items)}),ua(),ya();var he=Na(),ye=Le(he);xa(ye,{});var ke=a(ye,2),ge=a(t(ke),2),X=t(ge),Z=t(X),xe=t(Z);let Pe;var Te=a(xe,2);let Se;var we=a(Te,2);let $e;var Ce=a(we,2);let De;var Xe=a(Ce,2);let Ke;s(Z);var Ne=a(Z,2);{var Ze=i=>{var l=Ta(),r=a(t(l),4),v=t(r);S(v),ce(2),s(r);var b=a(r,2),d=t(b),_=a(d,2);s(b),s(l),N(()=>_.disabled=!e(E)),ha(v,()=>e(E),o=>ve(E,o)),R("click",d,()=>Y("/cart")),R("click",_,_e),w(i,l)};U(Ne,i=>{e(p)===1&&i(Ze)})}var qe=a(Ne,2);{var ea=i=>{var l=Sa(),r=a(t(l),2),v=t(r),b=a(t(v),2);S(b),s(v);var d=a(v,2),_=a(t(d),2);S(_),s(d);var o=a(d,2),h=a(t(o),2);Ue(h),s(o);var k=a(o,2),P=a(t(k),2);S(P),s(k);var y=a(k,2),C=a(t(y),2);S(C),s(y);var T=a(y,2),D=a(t(T),2);S(D),s(T);var I=a(T,2),A=a(t(I),2);Ue(A),s(I),s(r);var F=a(r,2),J=t(F),W=a(J,2);s(F),s(l),q(b,()=>e(n).fullName,u=>g(n,e(n).fullName=u)),q(_,()=>e(n).phone,u=>g(n,e(n).phone=u)),q(h,()=>e(n).address,u=>g(n,e(n).address=u)),q(P,()=>e(n).city,u=>g(n,e(n).city=u)),q(C,()=>e(n).province,u=>g(n,e(n).province=u)),q(D,()=>e(n).postalCode,u=>g(n,e(n).postalCode=u)),q(A,()=>e(n).notes,u=>g(n,e(n).notes=u)),R("click",J,fe),R("click",W,_e),w(i,l)};U(qe,i=>{e(p)===2&&i(ea)})}var aa=a(qe,2);{var sa=i=>{var l=$a(),r=a(t(l),2),v=a(t(r),2),b=t(v),d=t(b);S(d),d.value=d.__value="full";var _=a(d,2),o=t(_),h=a(t(o),2),k=t(h,!0);s(h),s(o),ce(2),s(_),s(b);var P=a(b,2),y=t(P);S(y),y.value=y.__value="dp";var C=a(y,2),T=t(C),D=a(t(T),2),I=t(D,!0);s(D),s(T),ce(2),s(C),s(P),s(v),s(r);var A=a(r,2),F=a(t(A),2);He(F,5,()=>V,fa,(K,f)=>{var ie=wa(),L=t(ie);S(L);var Re,Me=a(L,2),re=t(Me),ca=t(re,!0);s(re);var ne=a(re,2),da=t(ne,!0);s(ne);var Fe=a(ne,2),oa=t(Fe,!0);s(Fe),s(Me),s(ie),N(()=>{Re!==(Re=(e(f),c(()=>e(f).code)))&&(L.value=(L.__value=(e(f),c(()=>e(f).code)))??""),j(ca,(e(f),c(()=>e(f).name))),j(da,(e(f),c(()=>e(f).number))),j(oa,(e(f),c(()=>e(f).holder)))}),de(Qe,[],L,()=>(e(f),c(()=>e(f).code),e(m).bank),ja=>g(m,e(m).bank=ja)),w(K,ie)}),s(F),s(A);var J=a(A,4),W=t(J),u=a(W,2);s(J),s(l),N((K,f)=>{j(k,K),j(I,f)},[()=>c(()=>x(M())),()=>c(()=>x(M()*.5))]),de(oe,[],d,()=>e(m).paymentType,K=>g(m,e(m).paymentType=K)),de(oe,[],y,()=>e(m).paymentType,K=>g(m,e(m).paymentType=K)),R("click",W,fe),R("click",u,Ve),w(i,l)};U(aa,i=>{e(p)===3&&i(sa)})}s(X);var Be=a(X,2),ee=a(t(Be),2);He(ee,5,()=>e(B),i=>i.id,(i,l)=>{var r=Ca(),v=t(r),b=t(v,!0);s(v);var d=a(v,2),_=t(d),o=t(_,!0);s(_);var h=a(_,2),k=t(h),P=t(k,!0);s(k);var y=a(k,2),C=t(y);s(y),s(h);var T=a(h,2),D=t(T,!0);s(T),s(d),s(r),N(I=>{j(b,(e(l),c(()=>e(l).listing.images[0]))),j(o,(e(l),c(()=>e(l).listing.title))),j(P,(e(l),c(()=>e(l).listing.jastiperName))),j(C,`×${e(l),c(()=>e(l).quantity)??""}`),j(D,I)},[()=>(e(l),c(()=>x(pe(e(l)))))]),w(i,r)}),s(ee);var ae=a(ee,4),se=t(ae),ta=t(se);s(se);var Ie=a(se,2),la=t(Ie,!0);s(Ie),s(ae);var te=a(ae,2),Ae=a(t(te),2),ia=t(Ae,!0);s(Ae),s(te);var le=a(te,4),Oe=a(t(le),2),ra=t(Oe,!0);s(Oe),s(le);var na=a(le,2);{var va=i=>{var l=Ka(),r=a(Le(l),2),v=a(t(r),2),b=t(v,!0);s(v),s(r);var d=a(r,2);{var _=o=>{var h=Da(),k=t(h);s(h),N(P=>j(k,`Sisa ${P??""} dibayar kemudian`),[()=>c(()=>x(M()*.5))]),w(o,h)};U(d,o=>{e(m),c(()=>e(m).paymentType==="dp")&&o(_)})}N(o=>j(b,o),[()=>c(()=>x(me()))]),w(i,l)};U(na,i=>{e(p)===3&&i(va)})}s(Be),s(ge),s(ke),N((i,l,r)=>{Pe=z(xe,1,"step svelte-jbcej5",null,Pe,{active:e(p)>=1,completed:e(p)>1}),Se=z(Te,1,"step-line svelte-jbcej5",null,Se,{completed:e(p)>1}),$e=z(we,1,"step svelte-jbcej5",null,$e,{active:e(p)>=2,completed:e(p)>2}),De=z(Ce,1,"step-line svelte-jbcej5",null,De,{completed:e(p)>2}),Ke=z(Xe,1,"step svelte-jbcej5",null,Ke,{active:e(p)>=3}),j(ta,`Subtotal (${e(B),c(()=>e(B).length)??""} item)`),j(la,i),j(ia,l),j(ra,r)},[()=>c(()=>x(be()-ue())),()=>c(()=>x(ue())),()=>c(()=>x(M()))]),w(H,he),ma(),Ge()}export{Ya as component,Wa as universal};
