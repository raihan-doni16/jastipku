import{f as h,a as k}from"../chunks/CUf5UZYF.js";import"../chunks/BoQy5TvO.js";import{o as ma}from"../chunks/JjBbrouE.js";import{a6 as pa,a7 as Y,a8 as ka,a9 as ha,aa as f,i as e,ab as _a,z as b,ae as Ye,u as v,ac as l,k as g,a4 as i,a5 as s,a2 as U,ad as ze}from"../chunks/C6kp5iGx.js";import{s as r,e as Ne}from"../chunks/Dvw9CKj1.js";import{i as C}from"../chunks/BMTi0gWB.js";import{b as fa,e as Z,i as Fe}from"../chunks/DPurX8ys.js";import{r as ba}from"../chunks/CK8WfoRq.js";import{s as ga}from"../chunks/D6eV9jrv.js";import{s as He}from"../chunks/BfAcoFpJ.js";import{b as ya}from"../chunks/BXzdIX3i.js";import{b as Qe}from"../chunks/oa8gdtCF.js";import{i as Ta}from"../chunks/BvILkHPm.js";import{g as xa}from"../chunks/BqC4448f.js";import{M as Aa}from"../chunks/DIG4Q-3q.js";var Da=h("<option> </option>"),Na=h('<div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Diproses</div> <div class="info-subvalue svelte-10kheme"> </div></div>'),ja=h('<div class="info-section full-width svelte-10kheme"><div class="info-label svelte-10kheme">Catatan</div> <div class="info-subvalue svelte-10kheme"> </div></div>'),Ca=h('<div class="withdrawal-actions svelte-10kheme"><button class="btn-reject svelte-10kheme">Tolak</button> <button class="btn-approve svelte-10kheme">Setujui Penarikan</button></div>'),Sa=h('<div class="withdrawal-card svelte-10kheme"><div class="withdrawal-header svelte-10kheme"><div class="withdrawal-id-section svelte-10kheme"><span class="withdrawal-id svelte-10kheme"> </span> <span class="status-badge svelte-10kheme"> </span></div> <div class="withdrawal-date svelte-10kheme"> </div></div> <div class="withdrawal-content svelte-10kheme"><div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Jastiper</div> <div class="info-value svelte-10kheme"> </div> <div class="info-subvalue svelte-10kheme"> </div></div> <div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Jumlah Penarikan</div> <div class="info-value price svelte-10kheme"> </div></div> <div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Rekening Tujuan</div> <div class="info-value svelte-10kheme"> </div> <div class="info-subvalue svelte-10kheme"> </div> <div class="info-subvalue svelte-10kheme"> </div></div> <!> <!></div> <!></div>'),Pa=h('<div class="empty-state svelte-10kheme"><div class="empty-icon svelte-10kheme">ğŸ’³</div> <h3 class="svelte-10kheme">Tidak ada permintaan penarikan</h3> <p class="svelte-10kheme">Permintaan penarikan dari jastiper akan muncul di sini</p></div>'),Ra=h("<option> </option>"),Oa=h('<div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Dicairkan Pada</div> <div class="info-subvalue svelte-10kheme"> </div></div>'),Ba=h('<div class="transaction-actions svelte-10kheme"><button class="btn-release svelte-10kheme">Lepas Dana ke Jastiper</button></div>'),$a=h('<div class="transaction-card svelte-10kheme"><div class="transaction-header svelte-10kheme"><div class="transaction-id-section svelte-10kheme"><span class="transaction-id svelte-10kheme"> </span> <span class="order-code svelte-10kheme"> </span> <span class="status-badge svelte-10kheme"> </span></div> <div class="transaction-date svelte-10kheme"> </div></div> <div class="transaction-content svelte-10kheme"><div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Jastiper</div> <div class="info-value svelte-10kheme"> </div></div> <div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Pembeli</div> <div class="info-value svelte-10kheme"> </div></div> <div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Tipe Pembayaran</div> <div class="info-value svelte-10kheme"> </div></div> <div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Total Amount</div> <div class="info-value price svelte-10kheme"> </div></div> <div class="info-section svelte-10kheme"><div class="info-label svelte-10kheme">Dana Tertahan</div> <div> </div></div> <!></div> <!></div>'),Wa=h('<div class="empty-state svelte-10kheme"><div class="empty-icon svelte-10kheme">ğŸ’¸</div> <h3 class="svelte-10kheme">Tidak ada transaksi</h3> <p class="svelte-10kheme">Transaksi escrow akan muncul di sini</p></div>'),Ma=h('<!> <div class="container svelte-10kheme"><div class="header svelte-10kheme"><h1 class="svelte-10kheme">Transaksi & Rekber</h1> <p class="svelte-10kheme">Pantau saldo tertahan dan pencairan dana</p></div> <div class="stats-cards svelte-10kheme"><div class="stat-card svelte-10kheme"><div class="stat-icon svelte-10kheme" style="background: #fef3c7;">ğŸ’°</div> <div class="stat-content svelte-10kheme"><div class="stat-value svelte-10kheme"> </div> <div class="stat-label svelte-10kheme">Total Dana Tertahan</div></div></div> <div class="stat-card svelte-10kheme"><div class="stat-icon svelte-10kheme" style="background: #d1fae5;">âœ…</div> <div class="stat-content svelte-10kheme"><div class="stat-value svelte-10kheme"> </div> <div class="stat-label svelte-10kheme">Total Dana Dicairkan</div></div></div> <div class="stat-card svelte-10kheme"><div class="stat-icon svelte-10kheme" style="background: #dbeafe;">â³</div> <div class="stat-content svelte-10kheme"><div class="stat-value svelte-10kheme"> </div> <div class="stat-label svelte-10kheme">Permintaan Penarikan Pending</div></div></div> <div class="stat-card svelte-10kheme"><div class="stat-icon svelte-10kheme" style="background: #e9d5ff;">ğŸ“Š</div> <div class="stat-content svelte-10kheme"><div class="stat-value svelte-10kheme"> </div> <div class="stat-label svelte-10kheme">Total Transaksi</div></div></div></div> <div class="section svelte-10kheme"><div class="section-header svelte-10kheme"><h2 class="svelte-10kheme">Permintaan Penarikan Dana</h2> <select class="svelte-10kheme"></select></div> <div class="withdrawal-list svelte-10kheme"></div> <!></div> <div class="section svelte-10kheme"><div class="section-header svelte-10kheme"><h2 class="svelte-10kheme">Riwayat Transaksi Escrow</h2> <div class="filters svelte-10kheme"><div class="search-box svelte-10kheme"><span class="search-icon svelte-10kheme">ğŸ”</span> <input type="text" placeholder="Cari kode order, jastiper, atau pembeli..." class="svelte-10kheme"/></div> <select class="svelte-10kheme"></select></div></div> <div class="results-info svelte-10kheme"> </div> <div class="transactions-list svelte-10kheme"></div> <!></div></div>',1);function Ua(we,Ge){pa(Ge,!1);const S=b(),z=b(),ee=b(),ae=b(),je=b();let Ce="guest";fa.subscribe(t=>{Ce=t.role}),ma(()=>{if(Ce!=="admin"){xa("/login?redirect=/admin/transactions&expected=admin");return}});const K=[{id:"TRX001",orderCode:"ORD-2024-001",jastiperName:"Rina Travel",buyerName:"Budi Santoso",amount:85e4,escrowAmount:85e4,status:"held",type:"full_payment",createdAt:"2024-01-15T10:30:00",releasedAt:null},{id:"TRX002",orderCode:"ORD-2024-002",jastiperName:"Sinta Shop",buyerName:"Dewi Lestari",amount:45e4,escrowAmount:0,status:"released",type:"dp_payment",createdAt:"2024-01-14T14:20:00",releasedAt:"2024-01-16T09:15:00"},{id:"TRX003",orderCode:"ORD-2024-003",jastiperName:"Yuki Japan",buyerName:"Ahmad Hidayat",amount:12e5,escrowAmount:12e5,status:"held",type:"full_payment",createdAt:"2024-01-13T16:45:00",releasedAt:null},{id:"TRX004",orderCode:"ORD-2024-004",jastiperName:"Rina Travel",buyerName:"Siti Nurhaliza",amount:325e3,escrowAmount:0,status:"released",type:"full_payment",createdAt:"2024-01-12T11:30:00",releasedAt:"2024-01-14T13:20:00"},{id:"TRX005",orderCode:"ORD-2024-005",jastiperName:"Korea Stuff",buyerName:"Andi Wijaya",amount:6e5,escrowAmount:3e5,status:"held",type:"dp_payment",createdAt:"2024-01-16T08:15:00",releasedAt:null}],Se=[{id:"WD001",jastiperName:"Rina Travel",jastiperEmail:"rina@example.com",amount:245e4,bankName:"BCA",accountNumber:"1234567890",accountName:"Rina Maharani",status:"pending",requestedAt:"2024-01-17T09:30:00",processedAt:null,notes:""},{id:"WD002",jastiperName:"Sinta Shop",jastiperEmail:"sinta@example.com",amount:18e5,bankName:"Mandiri",accountNumber:"9876543210",accountName:"Sinta Dewi",status:"pending",requestedAt:"2024-01-16T15:20:00",processedAt:null,notes:""},{id:"WD003",jastiperName:"Yuki Japan",jastiperEmail:"yuki@example.com",amount:32e5,bankName:"BNI",accountNumber:"5554443332",accountName:"Yuki Tanaka",status:"approved",requestedAt:"2024-01-15T10:00:00",processedAt:"2024-01-16T11:30:00",notes:"Disetujui dan sudah ditransfer"},{id:"WD004",jastiperName:"Korea Stuff",jastiperEmail:"korea@example.com",amount:95e4,bankName:"BRI",accountNumber:"7778889990",accountName:"Kim Soo Jin",status:"rejected",requestedAt:"2024-01-14T13:45:00",processedAt:"2024-01-15T09:20:00",notes:"Saldo tidak mencukupi"}];let P=b("all"),R=b("all"),y=b("");const Ue=[{value:"all",label:"Semua Status"},{value:"held",label:"Dana Tertahan"},{value:"released",label:"Dana Dicairkan"}],Ze=[{value:"all",label:"Semua Status"},{value:"pending",label:"Menunggu"},{value:"approved",label:"Disetujui"},{value:"rejected",label:"Ditolak"}];let n=b({isOpen:!1,type:"info",title:"",message:"",confirmText:"OK",cancelText:"Batal",showCancel:!1,inputValue:"",inputPlaceholder:"",onConfirm:null});function O(t){g(n,{isOpen:!0,type:t.type||"info",title:t.title||"",message:t.message||"",confirmText:t.confirmText||"OK",cancelText:t.cancelText||"Batal",showCancel:t.showCancel||!1,inputValue:t.inputValue||"",inputPlaceholder:t.inputPlaceholder||"",onConfirm:t.onConfirm||null})}function ea(t){e(n).onConfirm&&(e(n).type==="prompt"&&t.detail!==void 0?e(n).onConfirm(t.detail):e(n).onConfirm())}function L(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)}function F(t){return t?new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function H(t){return{held:{label:"Dana Tertahan",color:"#f59e0b"},released:{label:"Dana Dicairkan",color:"#10b981"},pending:{label:"Menunggu",color:"#f59e0b"},approved:{label:"Disetujui",color:"#10b981"},rejected:{label:"Ditolak",color:"#ef4444"}}[t]||{label:t,color:"#64748b"}}function aa(t){O({type:"confirm",title:"Konfirmasi",message:"Apakah Anda yakin ingin menyetujui pencairan dana ini?",confirmText:"Ya",cancelText:"Batal",showCancel:!0,onConfirm:()=>{O({type:"success",title:"Berhasil",message:`Withdrawal ${t} disetujui. Dana akan ditransfer ke rekening jastiper.`,confirmText:"OK"})}})}function ta(t){O({type:"prompt",title:"Alasan Penolakan",message:"Alasan penolakan:",inputPlaceholder:"Masukkan alasan penolakan...",confirmText:"Submit",cancelText:"Batal",showCancel:!0,onConfirm:a=>{a&&O({type:"success",title:"Berhasil",message:`Withdrawal ${t} ditolak dengan alasan: ${a}`,confirmText:"OK"})}})}function sa(t){O({type:"confirm",title:"Konfirmasi",message:"Apakah Anda yakin ingin melepas dana escrow ini ke jastiper?",confirmText:"Ya",cancelText:"Batal",showCancel:!0,onConfirm:()=>{O({type:"success",title:"Berhasil",message:`Dana escrow untuk transaksi ${t} telah dilepas ke jastiper.`,confirmText:"OK"})}})}Y(()=>(e(P),e(y)),()=>{g(S,K.filter(t=>{const a=e(P)==="all"||t.status===e(P),o=e(y)===""||t.orderCode.toLowerCase().includes(e(y).toLowerCase())||t.jastiperName.toLowerCase().includes(e(y).toLowerCase())||t.buyerName.toLowerCase().includes(e(y).toLowerCase());return a&&o}))}),Y(()=>e(R),()=>{g(z,Se.filter(t=>e(R)==="all"||t.status===e(R)))}),Y(()=>{},()=>{g(ee,K.filter(t=>t.status==="held").reduce((t,a)=>t+a.escrowAmount,0))}),Y(()=>{},()=>{g(ae,K.filter(t=>t.status==="released").reduce((t,a)=>t+a.amount,0))}),Y(()=>{},()=>{g(je,Se.filter(t=>t.status==="pending").length)}),ka(),Ta();var Pe=Ma(),Re=ha(Pe);Aa(Re,{get type(){return e(n),v(()=>e(n).type)},get title(){return e(n),v(()=>e(n).title)},get message(){return e(n),v(()=>e(n).message)},get confirmText(){return e(n),v(()=>e(n).confirmText)},get cancelText(){return e(n),v(()=>e(n).cancelText)},get showCancel(){return e(n),v(()=>e(n).showCancel)},get inputPlaceholder(){return e(n),v(()=>e(n).inputPlaceholder)},get isOpen(){return e(n).isOpen},set isOpen(t){Ye(n,e(n).isOpen=t)},get inputValue(){return e(n).inputValue},set inputValue(t){Ye(n,e(n).inputValue=t)},$$events:{confirm:ea},$$legacy:!0});var Oe=l(Re,2),te=l(i(Oe),2),se=i(te),Be=l(i(se),2),$e=i(Be),ia=i($e,!0);s($e),U(2),s(Be),s(se);var ie=l(se,2),We=l(i(ie),2),Me=i(We),la=i(Me,!0);s(Me),U(2),s(We),s(ie);var le=l(ie,2),Ke=l(i(le),2),Le=i(Ke),va=i(Le,!0);s(Le),U(2),s(Ke),s(le);var Ee=l(le,2),Je=l(i(Ee),2),Ve=i(Je),ra=i(Ve,!0);s(Ve),U(2),s(Je),s(Ee),s(te);var ve=l(te,2),re=i(ve),ne=l(i(re),2);f(()=>{e(R),ze(()=>{})}),Z(ne,5,()=>Ze,Fe,(t,a)=>{var o=Da(),_=i(o,!0);s(o);var p={};f(()=>{r(_,(e(a),v(()=>e(a).label))),p!==(p=(e(a),v(()=>e(a).value)))&&(o.value=(o.__value=(e(a),v(()=>e(a).value)))??"")}),k(t,o)}),s(ne),s(re);var de=l(re,2);Z(de,5,()=>e(z),t=>t.id,(t,a)=>{var o=Sa(),_=i(o),p=i(_),T=i(p),ke=i(T,!0);s(T);var x=l(T,2),he=i(x,!0);s(x),s(p);var B=l(p,2),_e=i(B,!0);s(B),s(_);var $=l(_,2),E=i($),A=l(i(E),2),J=i(A,!0);s(A);var V=l(A,2),fe=i(V,!0);s(V),s(E);var D=l(E,2),q=l(i(D),2),be=i(q,!0);s(q),s(D);var N=l(D,2),W=l(i(N),2),ge=i(W,!0);s(W);var j=l(W,2),Q=i(j,!0);s(j);var w=l(j,2),I=i(w);s(w),s(N);var M=l(N,2);{var G=u=>{var d=Na(),c=l(i(d),2),m=i(c,!0);s(c),s(d),f(X=>r(m,X),[()=>(e(a),v(()=>F(e(a).processedAt)))]),k(u,d)};C(M,u=>{e(a),v(()=>e(a).processedAt)&&u(G)})}var ye=l(M,2);{var Te=u=>{var d=ja(),c=l(i(d),2),m=i(c,!0);s(c),s(d),f(()=>r(m,(e(a),v(()=>e(a).notes)))),k(u,d)};C(ye,u=>{e(a),v(()=>e(a).notes)&&u(Te)})}s($);var xe=l($,2);{var Ae=u=>{var d=Ca(),c=i(d),m=l(c,2);s(d),Ne("click",c,()=>ta(e(a).id)),Ne("click",m,()=>aa(e(a).id)),k(u,d)};C(xe,u=>{e(a),v(()=>e(a).status==="pending")&&u(Ae)})}s(o),f((u,d,c,m)=>{r(ke,(e(a),v(()=>e(a).id))),He(x,`background-color: ${u??""};`),r(he,d),r(_e,c),r(J,(e(a),v(()=>e(a).jastiperName))),r(fe,(e(a),v(()=>e(a).jastiperEmail))),r(be,m),r(ge,(e(a),v(()=>e(a).bankName))),r(Q,(e(a),v(()=>e(a).accountNumber))),r(I,`a.n. ${e(a),v(()=>e(a).accountName)??""}`)},[()=>(e(a),v(()=>H(e(a).status).color)),()=>(e(a),v(()=>H(e(a).status).label)),()=>(e(a),v(()=>F(e(a).requestedAt))),()=>(e(a),v(()=>L(e(a).amount)))]),k(t,o)}),s(de);var na=l(de,2);{var da=t=>{var a=Pa();k(t,a)};C(na,t=>{e(z),v(()=>e(z).length===0)&&t(da)})}s(ve);var qe=l(ve,2),oe=i(qe),Ie=l(i(oe),2),ce=i(Ie),Xe=l(i(ce),2);ba(Xe),s(ce);var ue=l(ce,2);f(()=>{e(P),ze(()=>{})}),Z(ue,5,()=>Ue,Fe,(t,a)=>{var o=Ra(),_=i(o,!0);s(o);var p={};f(()=>{r(_,(e(a),v(()=>e(a).label))),p!==(p=(e(a),v(()=>e(a).value)))&&(o.value=(o.__value=(e(a),v(()=>e(a).value)))??"")}),k(t,o)}),s(ue),s(Ie),s(oe);var me=l(oe,2),oa=i(me);s(me);var pe=l(me,2);Z(pe,5,()=>e(S),t=>t.id,(t,a)=>{var o=$a(),_=i(o),p=i(_),T=i(p),ke=i(T,!0);s(T);var x=l(T,2),he=i(x,!0);s(x);var B=l(x,2),_e=i(B,!0);s(B),s(p);var $=l(p,2),E=i($,!0);s($),s(_);var A=l(_,2),J=i(A),V=l(i(J),2),fe=i(V,!0);s(V),s(J);var D=l(J,2),q=l(i(D),2),be=i(q,!0);s(q),s(D);var N=l(D,2),W=l(i(N),2),ge=i(W,!0);s(W),s(N);var j=l(N,2),Q=l(i(j),2),w=i(Q,!0);s(Q),s(j);var I=l(j,2),M=l(i(I),2);let G;var ye=i(M,!0);s(M),s(I);var Te=l(I,2);{var xe=d=>{var c=Oa(),m=l(i(c),2),X=i(m,!0);s(m),s(c),f(De=>r(X,De),[()=>(e(a),v(()=>F(e(a).releasedAt)))]),k(d,c)};C(Te,d=>{e(a),v(()=>e(a).releasedAt)&&d(xe)})}s(A);var Ae=l(A,2);{var u=d=>{var c=Ba(),m=i(c);s(c),Ne("click",m,()=>sa(e(a).id)),k(d,c)};C(Ae,d=>{e(a),v(()=>e(a).status==="held"&&e(a).escrowAmount>0)&&d(u)})}s(o),f((d,c,m,X,De)=>{r(ke,(e(a),v(()=>e(a).id))),r(he,(e(a),v(()=>e(a).orderCode))),He(B,`background-color: ${d??""};`),r(_e,c),r(E,m),r(fe,(e(a),v(()=>e(a).jastiperName))),r(be,(e(a),v(()=>e(a).buyerName))),r(ge,(e(a),v(()=>e(a).type==="full_payment"?"Bayar Penuh":"DP 50%"))),r(w,X),G=ga(M,1,"info-value svelte-10kheme",null,G,{zero:e(a).escrowAmount===0}),r(ye,De)},[()=>(e(a),v(()=>H(e(a).status).color)),()=>(e(a),v(()=>H(e(a).status).label)),()=>(e(a),v(()=>F(e(a).createdAt))),()=>(e(a),v(()=>L(e(a).amount))),()=>(e(a),v(()=>L(e(a).escrowAmount)))]),k(t,o)}),s(pe);var ca=l(pe,2);{var ua=t=>{var a=Wa();k(t,a)};C(ca,t=>{e(S),v(()=>e(S).length===0)&&t(ua)})}s(qe),s(Oe),f((t,a)=>{r(ia,t),r(la,a),r(va,e(je)),r(ra,v(()=>K.length)),r(oa,`Menampilkan ${e(S),v(()=>e(S).length)??""} dari ${v(()=>K.length)??""} transaksi`)},[()=>(e(ee),v(()=>L(e(ee)))),()=>(e(ae),v(()=>L(e(ae))))]),Qe(ne,()=>e(R),t=>g(R,t)),ya(Xe,()=>e(y),t=>g(y,t)),Qe(ue,()=>e(P),t=>g(P,t)),k(we,Pe),_a()}export{Ua as component};
