import{f as h,a as g}from"../chunks/CUf5UZYF.js";import"../chunks/BoQy5TvO.js";import{o as ht}from"../chunks/JjBbrouE.js";import{a6 as Pt,a7 as me,a8 as Ct,a9 as ue,ab as Dt,i as e,z as G,aa as j,a3 as Tt,k as S,ac as a,a4 as r,a5 as s,a2 as ke,af as jt,ad as Z,u as O,ae as l}from"../chunks/C6kp5iGx.js";import{s as R,e as y}from"../chunks/Dvw9CKj1.js";import{i as L}from"../chunks/BMTi0gWB.js";import{b as St,e as Q,i as U}from"../chunks/DPurX8ys.js";import{h as Ot}from"../chunks/BNoMtYJH.js";import{r as T,s as Ge}from"../chunks/CK8WfoRq.js";import{s as _e}from"../chunks/D6eV9jrv.js";import{b as P}from"../chunks/BXzdIX3i.js";import{b as ee}from"../chunks/oa8gdtCF.js";import{i as $t}from"../chunks/BvILkHPm.js";import{s as xt,a as qt}from"../chunks/B2umgvaE.js";import{g as V}from"../chunks/BqC4448f.js";import{p as Bt}from"../chunks/CG_yMqQE.js";import{N as Et}from"../chunks/CAlpgxxh.js";import{l as It,p as Qe}from"../chunks/tGRDOfAf.js";var Kt=h("<option> </option>"),wt=h("<option> </option>"),Ft=h('<button class="btn-remove svelte-1ms8k8c">ÔøΩ</button>'),Jt=h('<div class="input-row svelte-1ms8k8c"><select class="svelte-1ms8k8c"><option disabled hidden=""></option><option>Pilih Kategori</option><!></select> <!></div>'),Ht=h('<button class="btn-remove svelte-1ms8k8c">ÔøΩ</button>'),Nt=h('<div class="input-row svelte-1ms8k8c"><input type="text" placeholder="Nama toko" class="svelte-1ms8k8c"/> <!></div>'),Rt=h('<div class="form-group svelte-1ms8k8c"><label for="event-type" class="svelte-1ms8k8c">Tipe Event</label> <select id="event-type" class="svelte-1ms8k8c"><option>Sale Event</option><option>Pre-Order</option><option>Limited Edition</option><option>Seasonal</option></select></div>'),Lt=h('<hr class="svelte-1ms8k8c"/> <h2 class="svelte-1ms8k8c"> </h2> <div class="form-group svelte-1ms8k8c"><label for="store-0" class="svelte-1ms8k8c">Toko yang Tersedia *</label> <div class="multi-input svelte-1ms8k8c"><!> <button class="btn-add svelte-1ms8k8c">+ Tambah Toko</button></div></div> <div class="form-row svelte-1ms8k8c"><div class="form-group svelte-1ms8k8c"><label for="departure-date" class="svelte-1ms8k8c">Tanggal Berangkat *</label> <input id="departure-date" type="date" class="svelte-1ms8k8c"/></div> <div class="form-group svelte-1ms8k8c"><label for="return-date" class="svelte-1ms8k8c">Tanggal Kembali *</label> <input id="return-date" type="date" class="svelte-1ms8k8c"/></div> <div class="form-group svelte-1ms8k8c"><label for="estimate-delivery" class="svelte-1ms8k8c">Estimasi Pengiriman *</label> <input id="estimate-delivery" type="date" class="svelte-1ms8k8c"/></div></div> <div class="form-row svelte-1ms8k8c"><div class="form-group svelte-1ms8k8c"><label for="fee-percent" class="svelte-1ms8k8c">Fee (%) *</label> <input id="fee-percent" type="number" placeholder="15" min="0" max="100" class="svelte-1ms8k8c"/> <span class="hint svelte-1ms8k8c">Fee yang dikenakan dari harga barang</span></div> <div class="form-group svelte-1ms8k8c"><label for="min-order" class="svelte-1ms8k8c">Minimal Order (IDR) *</label> <input id="min-order" type="number" placeholder="100000" min="0" class="svelte-1ms8k8c"/></div> <div class="form-group svelte-1ms8k8c"><label for="quota-slot" class="svelte-1ms8k8c">Quota/Slot *</label> <input id="quota-slot" type="number" placeholder="10" min="1" class="svelte-1ms8k8c"/></div></div> <!>',1),Mt=h("<option> </option>"),zt=h('<hr class="svelte-1ms8k8c"/> <h2 class="svelte-1ms8k8c">Informasi Preloved</h2> <div class="form-row svelte-1ms8k8c"><div class="form-group svelte-1ms8k8c"><label for="selling-price" class="svelte-1ms8k8c">Harga Jual (IDR) *</label> <input id="selling-price" type="number" placeholder="2500000" min="0" class="svelte-1ms8k8c"/></div> <div class="form-group svelte-1ms8k8c"><label for="original-price" class="svelte-1ms8k8c">Harga Asli (IDR)</label> <input id="original-price" type="number" placeholder="4500000" min="0" class="svelte-1ms8k8c"/> <span class="hint svelte-1ms8k8c">Opsional, untuk menampilkan diskon</span></div></div> <div class="form-row svelte-1ms8k8c"><div class="form-group svelte-1ms8k8c"><label for="condition" class="svelte-1ms8k8c">Kondisi Barang *</label> <select id="condition" class="svelte-1ms8k8c"></select></div> <div class="form-group svelte-1ms8k8c"><label for="stock" class="svelte-1ms8k8c">Stok *</label> <input id="stock" type="number" placeholder="1" min="1" class="svelte-1ms8k8c"/></div></div>',1),At=h('<div class="container svelte-1ms8k8c"><div class="header svelte-1ms8k8c"><div><p class="breadcrumb svelte-1ms8k8c"> </p> <h1 class="svelte-1ms8k8c">Edit Postingan</h1> <p class="svelte-1ms8k8c">Perbarui detail postingan sebelum disimpan</p></div> <div class="header-meta svelte-1ms8k8c"><span class="badge svelte-1ms8k8c"> </span> <button class="link-button svelte-1ms8k8c">ÔøΩ+? Kembali</button></div></div> <div class="form-container svelte-1ms8k8c"><div class="type-selector svelte-1ms8k8c"><button><span class="type-icon svelte-1ms8k8c">‚úàÔ∏è</span> <span class="type-label svelte-1ms8k8c">Jastip</span></button> <button><span class="type-icon svelte-1ms8k8c">üëú</span> <span class="type-label svelte-1ms8k8c">Preloved</span></button> <button><span class="type-icon svelte-1ms8k8c">üéâ</span> <span class="type-label svelte-1ms8k8c">Event</span></button></div> <div class="form-card svelte-1ms8k8c"><h2 class="svelte-1ms8k8c">Informasi Dasar</h2> <div class="form-group svelte-1ms8k8c"><label for="listing-title" class="svelte-1ms8k8c">Judul Postingan *</label> <input id="listing-title" type="text" placeholder="Contoh: Jastip Korea - Kosmetik &amp; Fashion" class="svelte-1ms8k8c"/></div> <div class="form-group svelte-1ms8k8c"><label for="listing-description" class="svelte-1ms8k8c">Deskripsi *</label> <textarea id="listing-description" placeholder="Jelaskan detail postingan Anda..." rows="5" class="svelte-1ms8k8c"></textarea></div> <div class="form-row svelte-1ms8k8c"><div class="form-group svelte-1ms8k8c"><label for="listing-country" class="svelte-1ms8k8c">Negara *</label> <select id="listing-country" class="svelte-1ms8k8c"><option disabled hidden=""></option><option>Pilih Negara</option><!></select></div> <div class="form-group svelte-1ms8k8c"><label for="category-0" class="svelte-1ms8k8c">Kategori *</label> <div class="multi-input svelte-1ms8k8c"><!> <button class="btn-add svelte-1ms8k8c">+ Tambah Kategori</button></div></div></div> <!> <!> <div class="form-actions svelte-1ms8k8c"><button class="btn-cancel svelte-1ms8k8c">Batalkan</button> <button class="btn-secondary svelte-1ms8k8c">Reset Perubahan</button> <button class="btn-submit svelte-1ms8k8c">Simpan Perubahan</button></div></div></div></div>'),Gt=h('<div class="empty-state svelte-1ms8k8c"><h2 class="svelte-1ms8k8c">Postingan tidak ditemukan</h2> <p class="svelte-1ms8k8c">Periksa kembali tautan atau kembali ke daftar postingan.</p> <button class="btn-submit svelte-1ms8k8c">ÔøΩ+? Kembali ke daftar</button></div>'),Qt=h("<!> <!>",1);function pa(Ue,Ve){Pt(Ve,!1);const fe=()=>qt(Bt,"$page",We),[We,Xe]=xt(),M=G(),m=G();let be="guest";St.subscribe(i=>{be=i.role});let c=G("jastip"),te=G(!1),t=G(ge());const Ye=["Kosmetik","Fashion","Elektronik","Gadget","Gaming","Skincare","Tas","Branded","Sepatu","Makanan","Obat-obatan","Buku","Mainan"],Ze=["Seperti Baru","Sangat Baik","Baik","Cukup Baik"];ht(()=>{be!=="jastiper"&&V(`/login?redirect=/jastiper/listings/${e(M)}/edit&expected=jastiper`)});function ge(){return{title:"",description:"",country:"",countryCode:"",stores:[""],categories:[""],departureDate:"",returnDate:"",estimateDelivery:"",fee:15,minOrder:0,quota:1,price:0,originalPrice:0,condition:"Sangat Baik",stock:1,eventType:"sale"}}function ye(i){var _,J;const o=ge();return{...o,title:i.title??o.title,description:i.description??o.description,country:i.country??o.country,countryCode:i.countryCode??o.countryCode,stores:(_=i.stores)!=null&&_.length?[...i.stores]:o.stores,categories:(J=i.categories)!=null&&J.length?[...i.categories]:o.categories,departureDate:i.departureDate??o.departureDate,returnDate:i.returnDate??o.returnDate,estimateDelivery:i.estimateDelivery??o.estimateDelivery,fee:i.fee??o.fee,minOrder:i.minOrder??o.minOrder,quota:i.quota??o.quota,price:i.price??o.price,originalPrice:i.originalPrice??o.originalPrice,condition:i.condition??o.condition,stock:i.stock??o.stock,eventType:i.eventType??o.eventType}}function et(){l(t,e(t).stores=[...e(t).stores,""])}function tt(i){e(t).stores.length!==1&&l(t,e(t).stores=e(t).stores.filter((o,_)=>_!==i))}function at(){l(t,e(t).categories=[...e(t).categories,""])}function st(i){e(t).categories.length!==1&&l(t,e(t).categories=e(t).categories.filter((o,_)=>_!==i))}function rt(){const i=Qe.find(o=>o.code===e(t).countryCode);l(t,e(t).country=i?i.name:"")}function it(){if(!e(t).title||!e(t).description||!e(t).countryCode)return alert("Harap lengkapi data wajib!"),!1;if(e(c)==="jastip"||e(c)==="event"){if(!e(t).departureDate||!e(t).returnDate||!e(t).estimateDelivery||!e(t).fee||!e(t).quota)return alert("Lengkapi data perjalanan terlebih dahulu."),!1;if(e(t).stores.filter(_=>_.trim()!=="").length===0)return alert("Harap tambahkan minimal 1 toko."),!1}return e(c)==="preloved"&&(!e(t).price||!e(t).condition)?(alert("Harap lengkapi data preloved!"),!1):e(t).categories.filter(o=>o.trim()!=="").length===0?(alert("Harap pilih minimal 1 kategori."),!1):!0}function ot(){if(!e(m)){alert("Postingan tidak ditemukan.");return}if(!it())return;const i={...e(m),type:e(c),title:e(t).title,description:e(t).description,country:e(t).country,countryCode:e(t).countryCode,categories:e(t).categories.filter(o=>o.trim()!==""),stores:e(t).stores.filter(o=>o.trim()!==""),departureDate:e(t).departureDate,returnDate:e(t).returnDate,estimateDelivery:e(t).estimateDelivery,fee:e(t).fee,minOrder:e(t).minOrder,quota:e(t).quota,price:e(t).price,originalPrice:e(t).originalPrice,condition:e(t).condition,stock:e(t).stock,eventType:e(t).eventType};console.log("Updated listing:",i),alert(`Postingan ${e(m).id} berhasil diperbarui!`),V("/jastiper/listings")}function lt(){e(m)&&(S(t,ye(e(m))),S(c,e(m).type??"jastip"))}me(()=>fe(),()=>{S(M,fe().params.id)}),me(()=>e(M),()=>{S(m,It.find(i=>i.id===e(M)))}),me(()=>(e(m),e(te)),()=>{e(m)&&!e(te)&&(S(c,e(m).type??"jastip"),S(t,ye(e(m))),S(te,!0))}),Ct(),$t();var he=Qt();Ot("1ms8k8c",i=>{j(()=>{Tt.title=`Edit Postingan ${e(M)??""} | Jastipku`},void 0,void 0,void 0,!0)});var Pe=ue(he);Et(Pe,{});var nt=a(Pe,2);{var vt=i=>{var o=At(),_=r(o),J=r(_),Ce=r(J),dt=r(Ce);s(Ce),ke(4),s(J);var De=a(J,2),ae=r(De),pt=r(ae);s(ae);var mt=a(ae,2);s(De),s(_);var Te=a(_,2),se=r(Te),re=r(se);let je;var ie=a(re,2);let Se;var Oe=a(ie,2);let $e;s(se);var xe=a(se,2),oe=a(r(xe),2),qe=a(r(oe),2);T(qe),s(oe);var le=a(oe,2),Be=a(r(le),2);jt(Be),s(le);var ne=a(le,2),ve=r(ne),W=a(r(ve),2);j(()=>{e(t),Z(()=>{})});var ce=r(W);ce.value=ce.__value="";var de=a(ce);de.value=de.__value="";var ut=a(de);Q(ut,1,()=>Qe,U,(d,u)=>{var n=Kt(),C=r(n);s(n);var k={};j(()=>{R(C,`${e(u),O(()=>e(u).flag)??""} ${e(u),O(()=>e(u).name)??""}`),k!==(k=(e(u),O(()=>e(u).code)))&&(n.value=(n.__value=(e(u),O(()=>e(u).code)))??"")}),g(d,n)}),s(W),s(ve);var Ee=a(ve,2),Ie=a(r(Ee),2),Ke=r(Ie);Q(Ke,1,()=>(e(t),O(()=>e(t).categories)),U,(d,u,n)=>{var C=Jt(),k=r(C);j(()=>{e(t),Z(()=>{})}),Ge(k,"id",`category-${n}`);var $=r(k);$.value=$.__value="";var x=a($);x.value=x.__value="";var H=a(x);Q(H,1,()=>Ye,U,(f,b)=>{var v=wt(),E=r(v,!0);s(v);var D={};j(()=>{R(E,e(b)),D!==(D=e(b))&&(v.value=(v.__value=e(b))??"")}),g(f,v)}),s(k);var q=a(k,2);{var B=f=>{var b=Ft();y("click",b,()=>st(n)),g(f,b)};L(q,f=>{e(t),O(()=>e(t).categories.length>1)&&f(B)})}s(C),ee(k,()=>e(t).categories[n],f=>l(t,e(t).categories[n]=f)),g(d,C)});var kt=a(Ke,2);s(Ie),s(Ee),s(ne);var we=a(ne,2);{var _t=d=>{var u=Lt(),n=a(ue(u),2),C=r(n,!0);s(n);var k=a(n,2),$=a(r(k),2),x=r($);Q(x,1,()=>(e(t),O(()=>e(t).stores)),U,(p,X,I)=>{var w=Nt(),K=r(w);T(K),Ge(K,"id",`store-${I}`);var A=a(K,2);{var Y=F=>{var Ae=Ht();y("click",Ae,()=>tt(I)),g(F,Ae)};L(A,F=>{e(t),O(()=>e(t).stores.length>1)&&F(Y)})}s(w),P(K,()=>e(t).stores[I],F=>l(t,e(t).stores[I]=F)),g(p,w)});var H=a(x,2);s($),s(k);var q=a(k,2),B=r(q),f=a(r(B),2);T(f),s(B);var b=a(B,2),v=a(r(b),2);T(v),s(b);var E=a(b,2),D=a(r(E),2);T(D),s(E),s(q);var z=a(q,2),N=r(z),Re=a(r(N),2);T(Re),ke(2),s(N);var pe=a(N,2),Le=a(r(pe),2);T(Le),s(pe);var Me=a(pe,2),ze=a(r(Me),2);T(ze),s(Me),s(z);var gt=a(z,2);{var yt=p=>{var X=Rt(),I=a(r(X),2);j(()=>{e(t),Z(()=>{})});var w=r(I);w.value=w.__value="sale";var K=a(w);K.value=K.__value="preorder";var A=a(K);A.value=A.__value="limited";var Y=a(A);Y.value=Y.__value="seasonal",s(I),s(X),ee(I,()=>e(t).eventType,F=>l(t,e(t).eventType=F)),g(p,X)};L(gt,p=>{e(c)==="event"&&p(yt)})}j(()=>R(C,e(c)==="event"?"Informasi Event":"Informasi Jastip")),y("click",H,et),P(f,()=>e(t).departureDate,p=>l(t,e(t).departureDate=p)),P(v,()=>e(t).returnDate,p=>l(t,e(t).returnDate=p)),P(D,()=>e(t).estimateDelivery,p=>l(t,e(t).estimateDelivery=p)),P(Re,()=>e(t).fee,p=>l(t,e(t).fee=p)),P(Le,()=>e(t).minOrder,p=>l(t,e(t).minOrder=p)),P(ze,()=>e(t).quota,p=>l(t,e(t).quota=p)),g(d,u)};L(we,d=>{(e(c)==="jastip"||e(c)==="event")&&d(_t)})}var Fe=a(we,2);{var ft=d=>{var u=zt(),n=a(ue(u),4),C=r(n),k=a(r(C),2);T(k),s(C);var $=a(C,2),x=a(r($),2);T(x),ke(2),s($),s(n);var H=a(n,2),q=r(H),B=a(r(q),2);j(()=>{e(t),Z(()=>{})}),Q(B,5,()=>Ze,U,(v,E)=>{var D=Mt(),z=r(D,!0);s(D);var N={};j(()=>{R(z,e(E)),N!==(N=e(E))&&(D.value=(D.__value=e(E))??"")}),g(v,D)}),s(B),s(q);var f=a(q,2),b=a(r(f),2);T(b),s(f),s(H),P(k,()=>e(t).price,v=>l(t,e(t).price=v)),P(x,()=>e(t).originalPrice,v=>l(t,e(t).originalPrice=v)),ee(B,()=>e(t).condition,v=>l(t,e(t).condition=v)),P(b,()=>e(t).stock,v=>l(t,e(t).stock=v)),g(d,u)};L(Fe,d=>{e(c)==="preloved"&&d(ft)})}var Je=a(Fe,2),He=r(Je),Ne=a(He,2),bt=a(Ne,2);s(Je),s(xe),s(Te),s(o),j(()=>{R(dt,`Dashboard / Postingan / ${e(m),O(()=>e(m).title)??""}`),R(pt,`ID ${e(m),O(()=>e(m).id)??""}`),je=_e(re,1,"type-btn svelte-1ms8k8c",null,je,{active:e(c)==="jastip"}),Se=_e(ie,1,"type-btn svelte-1ms8k8c",null,Se,{active:e(c)==="preloved"}),$e=_e(Oe,1,"type-btn svelte-1ms8k8c",null,$e,{active:e(c)==="event"})}),y("click",mt,()=>V("/jastiper/listings")),y("click",re,()=>S(c,"jastip")),y("click",ie,()=>S(c,"preloved")),y("click",Oe,()=>S(c,"event")),P(qe,()=>e(t).title,d=>l(t,e(t).title=d)),P(Be,()=>e(t).description,d=>l(t,e(t).description=d)),ee(W,()=>e(t).countryCode,d=>l(t,e(t).countryCode=d)),y("change",W,rt),y("click",kt,at),y("click",He,()=>V("/jastiper/listings")),y("click",Ne,lt),y("click",bt,ot),g(i,o)},ct=i=>{var o=Gt(),_=a(r(o),4);s(o),y("click",_,()=>V("/jastiper/listings")),g(i,o)};L(nt,i=>{e(m)?i(vt):i(ct,!1)})}g(Ue,he),Dt(),Xe()}export{pa as component};
