import{f as w,a as h,c as sa}from"../chunks/CUf5UZYF.js";import"../chunks/BoQy5TvO.js";import{o as ga,g as ka}from"../chunks/JjBbrouE.js";import{a6 as ya,a7 as va,a8 as Sa,aa as S,a4 as s,i as a,ab as Da,ac as l,k as d,z as E,ad as na,u as r,M as la,a5 as e,a9 as ra}from"../chunks/C6kp5iGx.js";import{s as u,e as L}from"../chunks/Dvw9CKj1.js";import{i as O}from"../chunks/BMTi0gWB.js";import{e as z,b as Aa,i as U}from"../chunks/DPurX8ys.js";import{s as Ca,r as Ma}from"../chunks/CK8WfoRq.js";import{s as Pa}from"../chunks/D6eV9jrv.js";import{b as Na}from"../chunks/BXzdIX3i.js";import{b as ia}from"../chunks/oa8gdtCF.js";import{i as Ta}from"../chunks/BvILkHPm.js";import{g as Ea}from"../chunks/BqC4448f.js";import{S as Ka}from"../chunks/MSclBbtX.js";import{o as Ba,s as j}from"../chunks/tGRDOfAf.js";var Fa=w("<option> </option>"),Ra=w("<option> </option>"),$a=w('<p class="empty svelte-1xwnv87">Tidak ada pesanan yang cocok dengan filter. Coba reset filter untuk melihat data lainnya.</p>'),ja=w('<tr><td class="svelte-1xwnv87"> </td><td class="svelte-1xwnv87"> </td><td class="svelte-1xwnv87"> </td><td class="svelte-1xwnv87"><strong class="svelte-1xwnv87"> </strong> <span class="svelte-1xwnv87"> </span></td><td class="svelte-1xwnv87"><!></td><td class="svelte-1xwnv87"> </td><td class="action-cell svelte-1xwnv87"><a class="link admin svelte-1xwnv87">Detail Admin</a> <span class="svelte-1xwnv87">·</span> <button class="link chat svelte-1xwnv87" type="button">Chat</button></td></tr>'),Ia=w('<div class="table-wrapper svelte-1xwnv87"><table class="svelte-1xwnv87"><thead><tr><th class="svelte-1xwnv87">Kode</th><th class="svelte-1xwnv87">Negara</th><th class="svelte-1xwnv87">Toko</th><th class="svelte-1xwnv87">Produk</th><th class="svelte-1xwnv87">Status</th><th class="svelte-1xwnv87">Estimasi Total</th><th class="svelte-1xwnv87">Aksi</th></tr></thead><tbody></tbody></table></div>'),La=w('<div><div class="meta svelte-1xwnv87"><span> </span> <span> </span></div> <p class="svelte-1xwnv87"> </p></div>'),Oa=w('<div class="chat-panel svelte-1xwnv87"><header class="svelte-1xwnv87"><h2 class="svelte-1xwnv87"> </h2> <button type="button" class="svelte-1xwnv87">Tutup</button></header> <div class="thread svelte-1xwnv87"></div> <div class="composer svelte-1xwnv87"><input placeholder="Balas pengguna..." class="svelte-1xwnv87"/> <button type="button" class="svelte-1xwnv87">Kirim</button></div></div>'),za=w('<section class="active svelte-1xwnv87"><a class="back-link svelte-1xwnv87" href="/admin">← Kembali</a> <header class="svelte-1xwnv87"><div><h1 class="svelte-1xwnv87">Pesanan Dalam Proses</h1> <p class="svelte-1xwnv87">Pantau pesanan yang sedang berjalan dari approval hingga pengiriman akhir.</p></div> <a href="/admin" class="back svelte-1xwnv87">← Kembali ke Dashboard</a></header> <div class="toolbar svelte-1xwnv87"><label class="svelte-1xwnv87">Filter Status <select class="svelte-1xwnv87"><option>Semua</option><!></select></label> <label class="svelte-1xwnv87">Negara <select class="svelte-1xwnv87"><option>Semua</option><!></select></label></div> <!> <!></section>');function vt(oa,ca){ya(ca,!1);const g=E(),Z=Ba.filter(t=>t.status!=="Menunggu_Review_Admin"&&t.status!=="Perlu_Negosiasi").map(t=>({...t,chats:[{sender:"Admin",message:"Barang sudah tiba di bandara. Estimasi tiba besok.",time:"11.00"},{sender:"User",message:"Noted kak, ditunggu update resinya.",time:"11.12"}]}));let D=E("all"),A=E("all"),i=E(null),C=E(""),_=E({});const da=[...new Set(Z.map(t=>t.country))];function ua(t){d(i,t),d(C,"")}function aa(){if(!a(i))return;const t=a(C).trim();t&&(d(_,{...a(_),[a(i)]:[...a(_)[a(i)],{sender:"Admin",message:t,time:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}]}),d(C,""))}ga(()=>{const{role:t}=ka(Aa);t!=="admin"&&Ea("/login?redirect=/admin/active&expected=admin")}),va(()=>(a(D),a(A)),()=>{d(g,Z.filter(t=>{const v=a(D)==="all"||t.status===a(D),o=a(A)==="all"||t.country===a(A);return v&&o}))}),va(()=>(a(_),a(g),a(i)),()=>{let t=a(_);a(g).forEach(v=>{t[v.code]||(t={...t,[v.code]:v.chats})}),t!==a(_)&&d(_,t),a(i)&&!a(g).find(v=>v.code===a(i))&&(d(i,null),d(C,""))}),Sa(),Ta();var q=za(),G=l(s(q),4),H=s(G),J=l(s(H));S(()=>{a(D),na(()=>{})});var Q=s(J);Q.value=Q.__value="all";var _a=l(Q);z(_a,1,()=>(la(j),r(()=>Object.keys(j))),U,(t,v)=>{var o=sa(),b=ra(o);{var p=n=>{var c=Fa(),f=s(c,!0);e(c);var M={};S(()=>{u(f,(la(j),a(v),r(()=>j[a(v)].label))),M!==(M=a(v))&&(c.value=(c.__value=a(v))??"")}),h(n,c)};O(b,n=>{a(v)!=="Menunggu_Review_Admin"&&a(v)!=="Perlu_Negosiasi"&&n(p)})}h(t,o)}),e(J),e(H);var ta=l(H,2),V=l(s(ta));S(()=>{a(A),na(()=>{})});var W=s(V);W.value=W.__value="all";var pa=l(W);z(pa,1,()=>da,U,(t,v)=>{var o=Ra(),b=s(o,!0);e(o);var p={};S(()=>{u(b,a(v)),p!==(p=a(v))&&(o.value=(o.__value=a(v))??"")}),h(t,o)}),e(V),e(ta),e(G);var ea=l(G,2);{var ma=t=>{var v=$a();h(t,v)},xa=t=>{var v=Ia(),o=s(v),b=l(s(o));z(b,5,()=>a(g),U,(p,n)=>{var c=ja(),f=s(c),M=s(f,!0);e(f);var K=l(f),B=s(K,!0);e(K);var P=l(K),N=s(P,!0);e(P);var F=l(P),m=s(F),x=s(m,!0);e(m);var k=l(m,2),R=s(k,!0);e(k),e(F);var y=l(F),X=s(y);Ka(X,{get statusMeta(){return j},get status(){return a(n),r(()=>a(n).status)}}),e(y);var T=l(y),Y=s(T);e(T);var $=l(T),I=s($),ba=l(I,4);e($),e(c),S(wa=>{u(M,(a(n),r(()=>a(n).code))),u(B,(a(n),r(()=>a(n).country))),u(N,(a(n),r(()=>a(n).store))),u(x,(a(n),r(()=>a(n).product))),u(R,(a(n),r(()=>a(n).variations))),u(Y,`Rp ${wa??""}`),Ca(I,"href",(a(n),r(()=>`/admin/review/${a(n).code}`)))},[()=>(a(n),r(()=>a(n).estimate.toLocaleString("id-ID")))]),L("click",ba,()=>ua(a(n).code)),h(p,c)}),e(b),e(o),e(v),h(t,v)};O(ea,t=>{a(g),r(()=>a(g).length===0)?t(ma):t(xa,!1)})}var ha=l(ea,2);{var fa=t=>{var v=sa(),o=ra(v);{var b=p=>{var n=Oa(),c=s(n),f=s(c),M=s(f);e(f);var K=l(f,2);e(c);var B=l(c,2);z(B,5,()=>(a(_),a(i),r(()=>a(_)[a(i)])),U,(m,x)=>{var k=La(),R=s(k),y=s(R),X=s(y,!0);e(y);var T=l(y,2),Y=s(T,!0);e(T),e(R);var $=l(R,2),I=s($,!0);e($),e(k),S(()=>{Pa(k,1,(a(x),r(()=>`bubble ${a(x).sender==="Admin"?"admin":"user"}`)),"svelte-1xwnv87"),u(X,(a(x),r(()=>a(x).sender))),u(Y,(a(x),r(()=>a(x).time))),u(I,(a(x),r(()=>a(x).message)))}),h(m,k)}),e(B);var P=l(B,2),N=s(P);Ma(N);var F=l(N,2);e(P),e(n),S(()=>u(M,`Chat Pesanan ${a(i)??""}`)),L("click",K,()=>d(i,null)),Na(N,()=>a(C),m=>d(C,m)),L("keydown",N,m=>{m.key==="Enter"&&(m.preventDefault(),aa())}),L("click",F,aa),h(p,n)};O(o,p=>{a(_),a(i),r(()=>a(_)[a(i)])&&p(b)})}h(t,v)};O(ha,t=>{a(i)&&t(fa)})}e(q),ia(J,()=>a(D),t=>d(D,t)),ia(V,()=>a(A),t=>d(A,t)),h(oa,q),Da()}export{vt as component};
