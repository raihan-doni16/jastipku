import{f,a as _}from"../chunks/CUf5UZYF.js";import"../chunks/BoQy5TvO.js";import{o as Na}from"../chunks/JjBbrouE.js";import{a6 as Oa,a7 as na,a8 as Ba,a9 as Da,ab as Ha,i as a,z as ia,k as la,ac as n,a4 as t,u as l,a5 as s,aa as j,a2 as Ja}from"../chunks/C6kp5iGx.js";import{e as p,s as v}from"../chunks/Dvw9CKj1.js";import{i as va}from"../chunks/BMTi0gWB.js";import{b as La,e as za}from"../chunks/DPurX8ys.js";import{r as Ea,s as Ga,a as Qa}from"../chunks/CK8WfoRq.js";import{s as Ua}from"../chunks/BfAcoFpJ.js";import{i as Va}from"../chunks/BvILkHPm.js";import{s as Wa,a as Xa}from"../chunks/B2umgvaE.js";import{g as D}from"../chunks/BqC4448f.js";import{N as Ya,c as H}from"../chunks/CAlpgxxh.js";var Za=f('<div class="empty-cart svelte-k7hhd7"><span class="empty-icon svelte-k7hhd7">ğŸ›’</span> <h2 class="svelte-k7hhd7">Keranjang Anda Kosong</h2> <p class="svelte-k7hhd7">Mulai berbelanja dan tambahkan produk ke keranjang Anda</p> <button class="btn-browse svelte-k7hhd7">Mulai Belanja</button></div>'),ae=f('<div class="item-price svelte-k7hhd7"> </div>'),ee=f('<div class="item-info svelte-k7hhd7"><span> </span> <span> </span></div>'),te=f('<div class="cart-item svelte-k7hhd7"><div class="item-image svelte-k7hhd7"><div class="image-placeholder svelte-k7hhd7"> </div> <span class="type-badge svelte-k7hhd7"> </span></div> <div class="item-details svelte-k7hhd7"><h3 class="svelte-k7hhd7"><a class="svelte-k7hhd7"> </a></h3> <p class="item-jastiper svelte-k7hhd7"> </p> <!></div> <div class="item-actions svelte-k7hhd7"><div class="quantity-control svelte-k7hhd7"><button class="qty-btn svelte-k7hhd7">âˆ’</button> <input type="number" min="1" max="99" class="svelte-k7hhd7"/> <button class="qty-btn svelte-k7hhd7">+</button></div> <div class="item-total svelte-k7hhd7"> </div> <button class="btn-remove svelte-k7hhd7">ğŸ—‘ï¸ Hapus</button></div></div>'),se=f(`<div class="cart-grid svelte-k7hhd7"><div class="cart-items svelte-k7hhd7"><div class="items-header svelte-k7hhd7"><h2 class="svelte-k7hhd7"> </h2></div> <!> <button class="btn-continue svelte-k7hhd7">â† Lanjut Belanja</button></div> <div class="order-summary svelte-k7hhd7"><h3 class="svelte-k7hhd7">Ringkasan Pesanan</h3> <div class="summary-row svelte-k7hhd7"><span class="svelte-k7hhd7"> </span> <span class="value svelte-k7hhd7"> </span></div> <div class="summary-row svelte-k7hhd7"><span class="svelte-k7hhd7">Total Fee Jastip</span> <span class="value svelte-k7hhd7"> </span></div> <hr class="svelte-k7hhd7"/> <div class="summary-row total svelte-k7hhd7"><span class="svelte-k7hhd7">Total</span> <span class="value svelte-k7hhd7"> </span></div> <div class="info-box svelte-k7hhd7"><p class="svelte-k7hhd7"><strong>Catatan:</strong> Harga final dapat berubah sesuai harga aktual produk
            saat pembelian. Anda akan dikonfirmasi sebelum pembayaran.</p></div> <button class="btn-checkout svelte-k7hhd7">Lanjut ke Checkout</button> <div class="benefits svelte-k7hhd7"><div class="benefit-item svelte-k7hhd7"><span class="benefit-icon svelte-k7hhd7">âœ“</span> <span>100% Aman & Terpercaya</span></div> <div class="benefit-item svelte-k7hhd7"><span class="benefit-icon svelte-k7hhd7">âœ“</span> <span>Garansi Uang Kembali</span></div> <div class="benefit-item svelte-k7hhd7"><span class="benefit-icon svelte-k7hhd7">âœ“</span> <span>Tracking Real-time</span></div></div></div></div>`),re=f('<!> <div class="container svelte-k7hhd7"><div class="header svelte-k7hhd7"><h1 class="svelte-k7hhd7">Keranjang Belanja</h1> <p class="svelte-k7hhd7">Review pesanan Anda sebelum checkout</p></div> <!></div>',1);function me(da,oa){Oa(oa,!1);const J=()=>Xa(H,"$cartStore",ca),[ca,ha]=Wa(),$=ia(),o=ia();let L="guest";La.subscribe(r=>{L=r.role}),Na(()=>{L!=="user"&&D("/login?redirect=/cart&expected=user")});function u(r){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r)}function z(r){const i=r.listing;if(i.type==="preloved")return i.price*r.quantity;{const d=i.minOrder||0,k=d*(i.fee||0)/100;return(d+k)*r.quantity}}function E(){return a(o).reduce((r,i)=>r+z(i),0)}function G(){return a(o).reduce((r,i)=>{const d=i.listing;if(d.type!=="preloved"){const y=(d.minOrder||0)*(d.fee||0)/100;return r+y*i.quantity}return r},0)}function q(r,i){i<1||H.updateQuantity(r,i)}function pa(r){confirm("Hapus item dari keranjang?")&&H.removeItem(r)}function ua(){if(a(o).length===0){alert("Keranjang Anda kosong!");return}D("/checkout")}function Q(){D("/browse")}na(()=>J(),()=>{la($,J())}),na(()=>a($),()=>{la(o,a($).items)}),Ba(),Va();var U=re(),V=Da(U);Ya(V,{});var W=n(V,2),ka=n(t(W),2);{var _a=r=>{var i=Za(),d=n(t(i),6);s(i),p("click",d,Q),_(r,i)},fa=r=>{var i=se(),d=t(i),k=t(d),y=t(k),ma=t(y);s(y),s(k);var X=n(k,2);za(X,1,()=>a(o),m=>m.id,(m,e)=>{var b=te(),A=t(b),K=t(A),qa=t(K,!0);s(K);var F=n(K,2),Ia=t(F,!0);s(F),s(A);var R=n(A,2),T=t(R),C=t(T),wa=t(C,!0);s(C),s(T);var M=n(T,2),Pa=t(M);s(M);var Sa=n(M,2);{var Aa=c=>{var h=ae(),g=t(h);s(h),j(B=>v(g,`${B??""} / item`),[()=>(a(e),l(()=>u(a(e).listing.price)))]),_(c,h)},Ka=c=>{var h=ee(),g=t(h),B=t(g);s(g);var ra=n(g,2),Ca=t(ra);s(ra),s(h),j(Ma=>{v(B,`Min Order: ${Ma??""}`),v(Ca,`Fee: ${a(e),l(()=>a(e).listing.fee)??""}%`)},[()=>(a(e),l(()=>u(a(e).listing.minOrder)))]),_(c,h)};va(Sa,c=>{a(e),l(()=>a(e).listing.type==="preloved")?c(Aa):c(Ka,!1)})}s(R);var ta=n(R,2),N=t(ta),sa=t(N),x=n(sa,2);Ea(x);var Fa=n(x,2);s(N);var O=n(N,2),Ra=t(O,!0);s(O);var Ta=n(O,2);s(ta),s(b),j(c=>{v(qa,(a(e),l(()=>a(e).listing.images[0]))),Ua(F,`background: ${a(e),l(()=>a(e).listing.type==="jastip"?"#0ea5e9":a(e).listing.type==="preloved"?"#f97316":"#a855f7")??""}`),v(Ia,(a(e),l(()=>a(e).listing.type==="jastip"?"Jastip":a(e).listing.type==="preloved"?"Preloved":"Event"))),Ga(C,"href",`/browse/${a(e),l(()=>a(e).listing.id)??""}`),v(wa,(a(e),l(()=>a(e).listing.title))),v(Pa,`oleh ${a(e),l(()=>a(e).listing.jastiperName)??""} â€¢ ${a(e),l(()=>a(e).listing.country)??""}`),Qa(x,(a(e),l(()=>a(e).quantity))),v(Ra,c)},[()=>(a(e),l(()=>u(z(a(e)))))]),p("click",sa,()=>q(a(e).id,a(e).quantity-1)),p("change",x,c=>q(a(e).id,parseInt(c.target.value))),p("click",Fa,()=>q(a(e).id,a(e).quantity+1)),p("click",Ta,()=>pa(a(e).id)),_(m,b)});var ba=n(X,2);s(d);var Y=n(d,2),I=n(t(Y),2),w=t(I),ga=t(w);s(w);var Z=n(w,2),ya=t(Z,!0);s(Z),s(I);var P=n(I,2),aa=n(t(P),2),xa=t(aa,!0);s(aa),s(P);var S=n(P,4),ea=n(t(S),2),ja=t(ea,!0);s(ea),s(S);var $a=n(S,4);Ja(2),s(Y),s(i),j((m,e,b)=>{v(ma,`Item dalam Keranjang (${a(o),l(()=>a(o).length)??""})`),v(ga,`Subtotal (${a(o),l(()=>a(o).length)??""} item)`),v(ya,m),v(xa,e),v(ja,b)},[()=>l(()=>u(E()-G())),()=>l(()=>u(G())),()=>l(()=>u(E()))]),p("click",ba,Q),p("click",$a,ua),_(r,i)};va(ka,r=>{a(o),l(()=>a(o).length===0)?r(_a):r(fa,!1)})}s(W),_(da,U),Ha(),ha()}export{me as component};
