import{o as Ka,s as Na}from"../chunks/tGRDOfAf.js";import{c as J,a as d,f as _}from"../chunks/CUf5UZYF.js";import"../chunks/BoQy5TvO.js";import{o as La,g as ra}from"../chunks/JjBbrouE.js";import{a6 as Ca,z as L,a9 as A,ab as qa,M as x,u as l,ac as r,a4 as e,a5 as a,i as s,aa as C,a2 as D,k as T,af as va}from"../chunks/C6kp5iGx.js";import{s as b,e as ia}from"../chunks/Dvw9CKj1.js";import{i as y}from"../chunks/BMTi0gWB.js";import{b as Ba,e as la,i as oa}from"../chunks/DPurX8ys.js";import{r as Q,a as na}from"../chunks/CK8WfoRq.js";import{s as Fa}from"../chunks/D6eV9jrv.js";import{c as Ha,b as da}from"../chunks/BXzdIX3i.js";import{i as Ia}from"../chunks/BvILkHPm.js";import{p as Ua}from"../chunks/B8Ahxlw9.js";import{g as za}from"../chunks/BqC4448f.js";import{p as Oa}from"../chunks/CG_yMqQE.js";import{S as Va}from"../chunks/MSclBbtX.js";function Ea({params:q,url:S}){return{order:Ka.find(t=>t.code===q.code),mode:S.searchParams.get("mode")??"review",negotiationNotes:[{author:"Admin Taro",message:"Harga dari toko naik, mohon konfirmasi penyesuaian Rp 150.000.",time:"2024-03-17 09:45"},{author:"User Mega",message:"Boleh, asalkan stok warna biru tetap tersedia.",time:"2024-03-17 11:02"}]}}const he=Object.freeze(Object.defineProperty({__proto__:null,load:Ea},Symbol.toStringTag,{value:"Module"}));var Ja=_('<section class="empty svelte-1wpvxj9"><h1>Pesanan tidak ditemukan</h1> <a href="/admin">Kembali ke Dashboard</a></section>'),Qa=_('<h3>Form Final Produk</h3> <table class="svelte-1wpvxj9"><thead><tr><th class="svelte-1wpvxj9">Nama Produk</th><th class="svelte-1wpvxj9">Variasi</th><th class="svelte-1wpvxj9">Qty</th><th class="svelte-1wpvxj9">Harga Lokal</th><th class="svelte-1wpvxj9">Harga IDR</th><th class="svelte-1wpvxj9">Lampiran</th></tr></thead><tbody><tr><td class="svelte-1wpvxj9"><input class="svelte-1wpvxj9"/></td><td class="svelte-1wpvxj9"><input class="svelte-1wpvxj9"/></td><td class="svelte-1wpvxj9"><input type="number" min="1" value="1" class="svelte-1wpvxj9"/></td><td class="svelte-1wpvxj9"><input value="¥ 18.000" class="svelte-1wpvxj9"/></td><td class="svelte-1wpvxj9"><input value="Rp 2.160.000" class="svelte-1wpvxj9"/></td><td class="svelte-1wpvxj9"><button class="ghost svelte-1wpvxj9" type="button">Upload Nota</button></td></tr></tbody></table> <div class="summary svelte-1wpvxj9"><div class="svelte-1wpvxj9"><span>Subtotal Belanja</span> <strong>Rp 2.160.000</strong></div> <div class="svelte-1wpvxj9"><span>Pajak (opsional)</span> <input placeholder="Rp 0" class="svelte-1wpvxj9"/></div> <div class="svelte-1wpvxj9"><span>Fee Jastip (persentase)</span> <input value="8%" class="svelte-1wpvxj9"/></div> <div class="svelte-1wpvxj9"><span>Total Akhir</span> <strong>Rp 2.332.800</strong></div></div> <button class="primary svelte-1wpvxj9" type="button">Kirim ke Pembeli</button>',1),Ga=_('<div class="empty-state svelte-1wpvxj9"><p>Pesanan ditolak. Sampaikan alasan penolakan kepada pengguna.</p> <textarea rows="3" placeholder="Contoh: Produk tidak tersedia atau melebihi batas bagasi." class="svelte-1wpvxj9"></textarea> <button class="ghost svelte-1wpvxj9" type="button">Kirim Alasan Penolakan</button></div>'),Wa=_('<div class="decision-actions svelte-1wpvxj9"><button class="primary svelte-1wpvxj9" type="button">Terima Permintaan</button> <button class="ghost danger svelte-1wpvxj9" type="button">Tolak Permintaan</button></div>'),Xa=_('<div class="accepted svelte-1wpvxj9">✅ Pesanan diterima. Lanjutkan negosiasi atau finalisasi produk.</div>'),Ya=_('<div class="declined svelte-1wpvxj9">❌ Pesanan ditolak. Kirim alasan resmi ke pengguna.</div>'),Za=_('<div class="note svelte-1wpvxj9"><header class="svelte-1wpvxj9"><strong> </strong> <span> </span></header> <p class="svelte-1wpvxj9"> </p></div>'),$a=_('<label><input type="radio" name="action" class="svelte-1wpvxj9"/> <span> </span></label>'),ae=_('<textarea rows="3" placeholder="Tuliskan alasan" class="svelte-1wpvxj9"></textarea>'),ee=_('<div class="card chat svelte-1wpvxj9"><h2>Catatan Negosiasi</h2> <div class="thread svelte-1wpvxj9"></div> <textarea rows="3" placeholder="Tambahkan catatan untuk pembeli" class="svelte-1wpvxj9"></textarea> <button class="ghost svelte-1wpvxj9" type="button">Kirim Catatan</button></div> <div class="card actions svelte-1wpvxj9"><h2>Tindakan Lanjutan</h2> <div class="action-list svelte-1wpvxj9"></div> <!> <button class="primary svelte-1wpvxj9" type="button">Simpan Keputusan</button></div>',1),te=_('<section class="review svelte-1wpvxj9"><a class="back-link svelte-1wpvxj9" href="/admin">← Kembali</a> <header class="svelte-1wpvxj9"><div><h1 class="svelte-1wpvxj9"> </h1> <p class="svelte-1wpvxj9"> </p></div> <!></header> <div class="layout svelte-1wpvxj9"><article class="card detail svelte-1wpvxj9"><h2>Detail Permintaan</h2> <dl class="svelte-1wpvxj9"><dt class="svelte-1wpvxj9">Produk</dt> <dd class="svelte-1wpvxj9"> </dd> <dt class="svelte-1wpvxj9">Variasi</dt> <dd class="svelte-1wpvxj9"> </dd> <dt class="svelte-1wpvxj9">Estimasi Total</dt> <dd class="svelte-1wpvxj9"> </dd></dl> <!></article> <aside class="panel svelte-1wpvxj9"><div class="card decision svelte-1wpvxj9"><h2>Ambil Pesanan?</h2> <p class="decision-hint svelte-1wpvxj9">Terima atau tolak pesanan sebelum proses negosiasi dimulai (mirip konfirmasi driver).</p> <!></div> <!></aside></div></section>');function be(q,S){var Z;Ca(S,!1);const G=[];let t=Ua(S,"data",8);const pa=[{label:"Setujui",status:"Disetujui_Admin",variant:"approve"},{label:"Minta Negosiasi",status:"Perlu_Negosiasi",variant:"negotiate"},{label:"Tolak",status:"Dibatalkan",variant:"reject"}];let M=L("Disetujui_Admin"),W=L(""),f=L(((Z=t().order)==null?void 0:Z.status)==="Menunggu_Review_Admin"?"pending":"accepted"),X=L("");function ca(){T(f,"accepted"),T(M,"Disetujui_Admin")}function ua(){T(f,"rejected")}La(()=>{const{role:g}=ra(Ba);if(g!=="admin"){const k=ra(Oa).url.pathname;za(`/login?redirect=${encodeURIComponent(k)}&expected=admin`)}}),Ia();var Y=J(),ma=A(Y);{var xa=g=>{var k=Ja();d(g,k)},_a=g=>{var k=te(),B=r(e(k),2),F=e(B),H=e(F),ja=e(H,!0);a(H);var $=r(H,2),wa=e($);a($),a(F);var ha=r(F,2);Va(ha,{get statusMeta(){return Na},get status(){return x(t()),l(()=>t().order.status)}}),a(B);var aa=r(B,2),I=e(aa),U=r(e(I),2),z=r(e(U),2),ba=e(z,!0);a(z);var O=r(z,4),ga=e(O,!0);a(O);var ea=r(O,4),fa=e(ea);a(ea),a(U);var ka=r(U,2);{var ya=i=>{var n=Qa(),p=r(A(n),2),c=r(e(p)),u=e(c),o=e(u),m=e(o);Q(m),a(o);var P=r(o),j=e(P);Q(j),a(P),D(4),a(u),a(c),a(p),D(4),C(()=>{na(m,(x(t()),l(()=>t().order.product))),na(j,(x(t()),l(()=>t().order.variations)))}),d(i,n)},Pa=i=>{var n=J(),p=A(n);{var c=u=>{var o=Ga(),m=r(e(o),2);va(m),D(2),a(o),da(m,()=>s(X),P=>T(X,P)),d(u,o)};y(p,u=>{s(f)==="rejected"&&u(c)},!0)}d(i,n)};y(ka,i=>{s(f)==="accepted"?i(ya):i(Pa,!1)})}a(I);var ta=r(I,2),V=e(ta),Ra=r(e(V),4);{var Ta=i=>{var n=Wa(),p=e(n),c=r(p,2);a(n),ia("click",p,ca),ia("click",c,ua),d(i,n)},Aa=i=>{var n=J(),p=A(n);{var c=o=>{var m=Xa();d(o,m)},u=o=>{var m=Ya();d(o,m)};y(p,o=>{s(f)==="accepted"?o(c):o(u,!1)},!0)}d(i,n)};y(Ra,i=>{s(f)==="pending"?i(Ta):i(Aa,!1)})}a(V);var Da=r(V,2);{var Sa=i=>{var n=ee(),p=A(n),c=r(e(p),2);la(c,5,()=>(x(t()),l(()=>t().negotiationNotes)),oa,(j,v)=>{var w=Za(),h=e(w),R=e(h),K=e(R,!0);a(R);var N=r(R,2),E=e(N,!0);a(N),a(h);var sa=r(h,2),Ma=e(sa,!0);a(sa),a(w),C(()=>{b(K,(s(v),l(()=>s(v).author))),b(E,(s(v),l(()=>s(v).time))),b(Ma,(s(v),l(()=>s(v).message)))}),d(j,w)}),a(c),D(4),a(p);var u=r(p,2),o=r(e(u),2);la(o,5,()=>pa,oa,(j,v)=>{var w=$a(),h=e(w);Q(h);var R,K=r(h,2),N=e(K,!0);a(K),a(w),C(()=>{Fa(w,1,(s(v),l(()=>`radio ${s(v).variant}`)),"svelte-1wpvxj9"),R!==(R=(s(v),l(()=>s(v).status)))&&(h.value=(h.__value=(s(v),l(()=>s(v).status)))??""),b(N,(s(v),l(()=>s(v).label)))}),Ha(G,[],h,()=>(s(v),l(()=>s(v).status),s(M)),E=>T(M,E)),d(j,w)}),a(o);var m=r(o,2);{var P=j=>{var v=ae();va(v),da(v,()=>s(W),w=>T(W,w)),d(j,v)};y(m,j=>{s(M)!=="Disetujui_Admin"&&j(P)})}D(2),a(u),d(i,n)};y(Da,i=>{s(f)==="accepted"&&i(Sa)})}a(ta),a(aa),a(k),C(i=>{b(ja,(x(t()),l(()=>t().order.code))),b(wa,`${x(t()),l(()=>t().order.store)??""} · ${x(t()),l(()=>t().order.country)??""}`),b(ba,(x(t()),l(()=>t().order.product))),b(ga,(x(t()),l(()=>t().order.variations))),b(fa,`Rp ${i??""}`)},[()=>(x(t()),l(()=>t().order.estimate.toLocaleString("id-ID")))]),d(g,k)};y(ma,g=>{x(t()),l(()=>!t().order)?g(xa):g(_a,!1)})}d(q,Y),qa()}export{be as component,he as universal};
