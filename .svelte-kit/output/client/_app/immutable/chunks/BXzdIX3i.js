import{V as t,a0 as C,u as y,a1 as b,h as n,_,$ as V,Z as w,x as A,R as S}from"./C6kp5iGx.js";function x(e,v,c=v){var f=new WeakSet;t(e,"input",async l=>{var d=l?e.defaultValue:e.value;if(d=u(e)?m(d):d,c(d),_!==null&&f.add(_),await C(),d!==(d=v())){var r=e.selectionStart,s=e.selectionEnd,o=e.value.length;if(e.value=d??"",s!==null){var a=e.value.length;r===s&&s===o&&a>o?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=r,e.selectionEnd=Math.min(s,a))}}}),(n&&e.defaultValue!==e.value||y(v)==null&&e.value)&&(c(u(e)?m(e.value):e.value),_!==null&&f.add(_)),b(()=>{var l=v();if(e===document.activeElement){var d=V??_;if(f.has(d))return}u(e)&&l===m(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const k=new Set;function B(e,v,c,f,l=f){var d=c.getAttribute("type")==="checkbox",r=e;let s=!1;if(v!==null)for(var o of v)r=r[o]??(r[o]=[]);r.push(c),t(c,"change",()=>{var a=c.__value;d&&(a=i(r,a,c.checked)),l(a)},()=>l(d?[]:null)),b(()=>{var a=f();if(n&&c.defaultChecked!==c.checked){s=!0;return}d?(a=a||[],c.checked=a.includes(c.__value)):c.checked=w(c.__value,a)}),A(()=>{var a=r.indexOf(c);a!==-1&&r.splice(a,1)}),k.has(r)||(k.add(r),S(()=>{r.sort((a,h)=>a.compareDocumentPosition(h)===4?-1:1),k.delete(r)})),S(()=>{if(s){var a;if(d)a=i(r,a,c.checked);else{var h=r.find(E=>E.checked);a=h==null?void 0:h.__value}l(a)}})}function D(e,v,c=v){t(e,"change",f=>{var l=f?e.defaultChecked:e.checked;c(l)}),(n&&e.defaultChecked!==e.checked||y(v)==null)&&c(e.checked),b(()=>{var f=v();e.checked=!!f})}function i(e,v,c){for(var f=new Set,l=0;l<e.length;l+=1)e[l].checked&&f.add(e[l].__value);return c||f.delete(v),Array.from(f)}function u(e){var v=e.type;return v==="number"||v==="range"}function m(e){return e===""?null:+e}export{D as a,x as b,B as c};
